[
    {
        "id": "ea8953c8.9d979",
        "type": "tab",
        "label": "Presence detections",
        "disabled": false,
        "info": ""
    },
    {
        "id": "27f4a783.3a8dc8",
        "type": "tab",
        "label": "Auto Lights DS",
        "disabled": false,
        "info": ""
    },
    {
        "id": "a76c0410.5bd8c8",
        "type": "tab",
        "label": "Auto Lights US",
        "disabled": false,
        "info": ""
    },
    {
        "id": "de9dda60.62f588",
        "type": "tab",
        "label": "Picture Frame",
        "disabled": false,
        "info": ""
    },
    {
        "id": "e594dd4a.60761",
        "type": "tab",
        "label": "RF Remotes",
        "disabled": false,
        "info": ""
    },
    {
        "id": "3434d199.8ed28e",
        "type": "tab",
        "label": "Zigbee Remotes",
        "disabled": false,
        "info": ""
    },
    {
        "id": "823d3fb7.65d29",
        "type": "tab",
        "label": "Routines",
        "disabled": false,
        "info": ""
    },
    {
        "id": "ff5661ef.cd5bf",
        "type": "tab",
        "label": "Alarm",
        "disabled": false,
        "info": ""
    },
    {
        "id": "b0dd0c0f.47706",
        "type": "tab",
        "label": "Broadlink RM Pro",
        "disabled": false,
        "info": ""
    },
    {
        "id": "6e7a064f.40b368",
        "type": "tab",
        "label": "Cameras",
        "disabled": false,
        "info": ""
    },
    {
        "id": "d1ff6abb.b25cf8",
        "type": "tab",
        "label": "Auto Off Timers US",
        "disabled": false,
        "info": ""
    },
    {
        "id": "191e949e.9f212b",
        "type": "tab",
        "label": "Auto Off Timers DS",
        "disabled": false,
        "info": ""
    },
    {
        "id": "5a39eab2.9f6814",
        "type": "server",
        "z": "",
        "name": "Home Assistant",
        "legacy": false,
        "hassio": false,
        "rejectUnauthorizedCerts": true,
        "ha_boolean": "y|yes|true|on|home|open",
        "connectionDelay": true
    },
    {
        "id": "32add66e.5cfcaa",
        "type": "mqtt-broker",
        "z": "",
        "name": "",
        "broker": "192.168.1.40",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "911cc32f.93c4a",
        "type": "rmdevice",
        "z": "",
        "folder": "/var",
        "mac": "780F774DF04C",
        "host": "192.168.1.16"
    },
    {
        "id": "baaf931a.ba3de",
        "type": "server-state-changed",
        "z": "ea8953c8.9d979",
        "name": "Ettienne home",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "person.ettienne",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 110,
        "y": 80,
        "wires": [
            [
                "4f3eb1ca.3726a"
            ],
            [
                "bb96cff1.d82a5"
            ]
        ]
    },
    {
        "id": "4f3eb1ca.3726a",
        "type": "api-call-service",
        "z": "ea8953c8.9d979",
        "name": "Ettienne Home",
        "server": "5a39eab2.9f6814",
        "service_domain": "input_boolean",
        "service": "turn_on",
        "data": "{\"entity_id\":\"input_boolean.ettienne_home\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 440,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "bb96cff1.d82a5",
        "type": "api-call-service",
        "z": "ea8953c8.9d979",
        "name": "Ettienne Away",
        "server": "5a39eab2.9f6814",
        "service_domain": "input_boolean",
        "service": "turn_off",
        "data": "{\"entity_id\":\"input_boolean.ettienne_home\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 440,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "b4c7b4ac.851d38",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Laundry Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.door_window_sensor_laundry_open",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 150,
        "y": 160,
        "wires": [
            [
                "f41541aa.8d4ff"
            ],
            [
                "73950d0b.f9b674"
            ]
        ]
    },
    {
        "id": "f41541aa.8d4ff",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Laundry Lights On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.shelly_1_laundry\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 750,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "73950d0b.f9b674",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Laundry Lights Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_1_laundry\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 760,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "d6ad6114.eb34d",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Pantry Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.door_window_sensor_pantry_open",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 150,
        "y": 300,
        "wires": [
            [
                "1f2d5974.8e5757"
            ],
            [
                "bce86ceb.13782"
            ]
        ]
    },
    {
        "id": "1f2d5974.8e5757",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Pantry Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.lifx_pantry\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 760,
        "y": 244,
        "wires": [
            []
        ]
    },
    {
        "id": "bce86ceb.13782",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Pantry Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.lifx_pantry\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 760,
        "y": 304,
        "wires": [
            []
        ]
    },
    {
        "id": "968e92c3.24fe3",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "sensor.door_window_sensor_garage_open",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "num",
        "haltifstate": "255",
        "halt_if_type": "num",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 150,
        "y": 740,
        "wires": [
            [
                "c136fd73.7bfcb",
                "9c92a3d7.8e664"
            ],
            [
                "a65b05ba.dfa598"
            ]
        ]
    },
    {
        "id": "c136fd73.7bfcb",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.lifx_garage\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 770,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "cce65336.ef488",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.lifx_garage\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1780,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "4fade16e.dc7e5",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Panel Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.door_window_sensor_garagepaneldoor_open",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 170,
        "y": 840,
        "wires": [
            [
                "c136fd73.7bfcb",
                "9c92a3d7.8e664"
            ],
            [
                "a521d80f.f0a7a8"
            ]
        ]
    },
    {
        "id": "a00c283f.0f9d78",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Stairs Closet Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "sensor.door_window_sensor_stairs_closet_open",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "num",
        "haltifstate": "255",
        "halt_if_type": "num",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 170,
        "y": 440,
        "wires": [
            [
                "34c203d3.d5c28c"
            ],
            [
                "7d4b071f.6e5798"
            ]
        ]
    },
    {
        "id": "7d4b071f.6e5798",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Cupboard Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.lifx_stairs_closet\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 770,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "34c203d3.d5c28c",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Cupboard Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.lifx_stairs_closet\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 770,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "5a24c417.69153c",
        "type": "function",
        "z": "27f4a783.3a8dc8",
        "name": "Delay for 60 seconds",
        "func": "setTimeout(function(){\n    node.status({fill:\"red\", shape:\"ring\", text:\" \"});\n    msg['payload'] = 'finished';\n    node.send(msg);\n}, 60000);\nnode.status({fill:\"blue\", shape:\"ring\", text:' '});",
        "outputs": 1,
        "noerr": 0,
        "x": 1060,
        "y": 820,
        "wires": [
            [
                "3076db1c.367fb4"
            ]
        ]
    },
    {
        "id": "39cc3eac.aed042",
        "type": "server-state-changed",
        "z": "de9dda60.62f588",
        "name": "Movement Detected",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.multisensor_dining_motion",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 380,
        "y": 240,
        "wires": [
            [
                "6e01e350.2107ac"
            ],
            []
        ]
    },
    {
        "id": "6e01e350.2107ac",
        "type": "api-call-service",
        "z": "de9dda60.62f588",
        "name": "Turn screen on",
        "server": "5a39eab2.9f6814",
        "service_domain": "mqtt",
        "service": "publish",
        "data": "{\"topic\": \"photo_frame/screen_on\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 970,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "1e296f2b.910771",
        "type": "inject",
        "z": "de9dda60.62f588",
        "name": "Manual Off",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 380,
        "y": 400,
        "wires": [
            [
                "728609bc.a22d78"
            ]
        ]
    },
    {
        "id": "728609bc.a22d78",
        "type": "api-call-service",
        "z": "de9dda60.62f588",
        "name": "Turn screen off",
        "server": "5a39eab2.9f6814",
        "service_domain": "mqtt",
        "service": "publish",
        "data": "{\"topic\": \"photo_frame/screen_off\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 960,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "fe0d5b58.805fb8",
        "type": "inject",
        "z": "de9dda60.62f588",
        "name": "Manual On",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 400,
        "y": 180,
        "wires": [
            [
                "6e01e350.2107ac"
            ]
        ]
    },
    {
        "id": "5b41d4a3.7656cc",
        "type": "poll-state",
        "z": "de9dda60.62f588",
        "name": "No movement for x seconds",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "updateinterval": "60",
        "updateIntervalUnits": "seconds",
        "outputinitially": false,
        "outputonchanged": false,
        "entity_id": "binary_sensor.multisensor_dining_motion",
        "state_type": "str",
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "x": 320,
        "y": 460,
        "wires": [
            [
                "728609bc.a22d78"
            ],
            []
        ]
    },
    {
        "id": "b7d0ae54.64a9b",
        "type": "mqtt in",
        "z": "e594dd4a.60761",
        "name": "OpenMQTTGateway",
        "topic": "home/OpenMQTTGateway/433toMQTT",
        "qos": "2",
        "datatype": "json",
        "broker": "32add66e.5cfcaa",
        "x": 210,
        "y": 2700,
        "wires": [
            [
                "b6d0bb9c.36b058",
                "2d996532.f7217a",
                "316bd61.4edd52a",
                "6ff0af5a.4036a",
                "93ae2105.cb04b",
                "1bfd3825.1395b8",
                "c98b1fb2.2ddd5",
                "82de8215.98dff",
                "dac700f1.84a69",
                "5d6242a8.bd6e0c",
                "c4997e2b.e67ca",
                "913f472d.b8fe48",
                "f99a6463.ac20e8",
                "79e20253.d1af0c",
                "4cd028b4.97df38",
                "74c842ef.781fcc",
                "a30e1a2f.ab8ad8"
            ]
        ]
    },
    {
        "id": "b6d0bb9c.36b058",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "Bauhn 1 Green",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "349147087",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 860,
        "y": 2540,
        "wires": [
            [
                "fbd63ab.09202c8"
            ]
        ]
    },
    {
        "id": "2d996532.f7217a",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "Bauhn 1 Red",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "349145024",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 850,
        "y": 2578,
        "wires": [
            [
                "b42d48a9.e72f28"
            ]
        ]
    },
    {
        "id": "6ff0af5a.4036a",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "Bauhn 2 Red",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "349144004",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 850,
        "y": 2679,
        "wires": [
            [
                "e5193b28.90c048"
            ]
        ]
    },
    {
        "id": "316bd61.4edd52a",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "Bauhn 2 Green",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "349146056",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 860,
        "y": 2640,
        "wires": [
            [
                "7d89072d.38d008"
            ]
        ]
    },
    {
        "id": "1bfd3825.1395b8",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "Bauhn 3 Red",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "349144514",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 850,
        "y": 2784,
        "wires": [
            [
                "629bdf7e.7477a"
            ]
        ]
    },
    {
        "id": "93ae2105.cb04b",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "Bauhn 3 Green",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "349146572",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 860,
        "y": 2740,
        "wires": [
            [
                "2c890915.2a7056"
            ]
        ]
    },
    {
        "id": "82de8215.98dff",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "Bauhn 4 Red",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "349144769",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 850,
        "y": 2880,
        "wires": [
            [
                "eeabc7f7.2b9b88"
            ]
        ]
    },
    {
        "id": "c98b1fb2.2ddd5",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "Bauhn 4 Green",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "349146830",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 860,
        "y": 2840,
        "wires": [
            [
                "91d77af.66ad288"
            ]
        ]
    },
    {
        "id": "5d6242a8.bd6e0c",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 1 B",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2599028",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 480,
        "y": 3100,
        "wires": [
            []
        ]
    },
    {
        "id": "dac700f1.84a69",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 1 A",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2599032",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 480,
        "y": 3060,
        "wires": [
            []
        ]
    },
    {
        "id": "913f472d.b8fe48",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 1 D",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2599025",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 480,
        "y": 3180,
        "wires": [
            []
        ]
    },
    {
        "id": "c4997e2b.e67ca",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 1 C",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2599026",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 480,
        "y": 3140,
        "wires": [
            []
        ]
    },
    {
        "id": "f99a6463.ac20e8",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 2 D",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "6402353",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 480,
        "y": 3020,
        "wires": [
            []
        ]
    },
    {
        "id": "79e20253.d1af0c",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 2 C",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "6402354",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 480,
        "y": 2980,
        "wires": [
            []
        ]
    },
    {
        "id": "4cd028b4.97df38",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 2 A",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "6402360",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 480,
        "y": 2940,
        "wires": [
            []
        ]
    },
    {
        "id": "9411307d.55462",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Study Light Toggle",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "toggle",
        "data": "{\"entity_id\":\"light.shelly_1_study_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 898,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "26c4c83b.04b018",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Study Lamp Toggle",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "toggle",
        "data": "{\"entity_id\":\"light.tradfri_bulb_1\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 900,
        "y": 170,
        "wires": [
            []
        ]
    },
    {
        "id": "d872b8f.0239348",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Rumpus Light Toggle",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "toggle",
        "data": "{\"entity_id\":\"light.lifx_rumpus_standing\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1010,
        "y": 349,
        "wires": [
            []
        ]
    },
    {
        "id": "47588451.003c9c",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Discreet Light Toggle",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "toggle",
        "data": "{\"entity_id\":\"light.discreet_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1010,
        "y": 389,
        "wires": [
            []
        ]
    },
    {
        "id": "a521d80f.f0a7a8",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Door Closed",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "0",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "sensor.door_window_sensor_garage_open",
        "state_type": "num",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 780,
        "y": 848,
        "wires": [
            [
                "5a24c417.69153c"
            ],
            []
        ]
    },
    {
        "id": "a65b05ba.dfa598",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Panel Door Closed",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "binary_sensor.door_window_sensor_garagepaneldoor_open",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 800,
        "y": 780,
        "wires": [
            [
                "5a24c417.69153c"
            ],
            []
        ]
    },
    {
        "id": "92f55ef6.8a92f",
        "type": "server-state-changed",
        "z": "ea8953c8.9d979",
        "name": "Kelly home",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "person.kelly",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 100,
        "y": 180,
        "wires": [
            [
                "6fa0a667.d562c8"
            ],
            [
                "bcd0268f.0fc1c8"
            ]
        ]
    },
    {
        "id": "6fa0a667.d562c8",
        "type": "api-call-service",
        "z": "ea8953c8.9d979",
        "name": "Kelly Home",
        "server": "5a39eab2.9f6814",
        "service_domain": "input_boolean",
        "service": "turn_on",
        "data": "{\"entity_id\":\"input_boolean.kelly_home\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 430,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "bcd0268f.0fc1c8",
        "type": "api-call-service",
        "z": "ea8953c8.9d979",
        "name": "Kelly Away",
        "server": "5a39eab2.9f6814",
        "service_domain": "input_boolean",
        "service": "turn_off",
        "data": "{\"entity_id\":\"input_boolean.kelly_home\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 430,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "83878fb4.30705",
        "type": "server-state-changed",
        "z": "ea8953c8.9d979",
        "name": "Ettienne Home Person",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "person.ettienne",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 140,
        "y": 400,
        "wires": [
            [
                "304decee.e9de34"
            ],
            [
                "e94f744f.4dda88"
            ]
        ]
    },
    {
        "id": "870bbf61.c8505",
        "type": "server-state-changed",
        "z": "ea8953c8.9d979",
        "name": "Kelly Home Person",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "person.kelly",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 130,
        "y": 540,
        "wires": [
            [
                "304decee.e9de34"
            ],
            [
                "3e47820d.382fce"
            ]
        ]
    },
    {
        "id": "e94f744f.4dda88",
        "type": "api-current-state",
        "z": "ea8953c8.9d979",
        "name": "Kelly Home Person",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "person.kelly",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 570,
        "y": 400,
        "wires": [
            [],
            [
                "7c3069d6.6ff938"
            ]
        ]
    },
    {
        "id": "3e47820d.382fce",
        "type": "api-current-state",
        "z": "ea8953c8.9d979",
        "name": "Ettienne Home Person",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "person.ettienne",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 580,
        "y": 540,
        "wires": [
            [],
            [
                "7c3069d6.6ff938"
            ]
        ]
    },
    {
        "id": "7c3069d6.6ff938",
        "type": "api-current-state",
        "z": "ea8953c8.9d979",
        "name": "House Guests",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "input_boolean.house_guests",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 840,
        "y": 480,
        "wires": [
            [],
            [
                "cc1ec8c7.424ea8"
            ]
        ]
    },
    {
        "id": "304decee.e9de34",
        "type": "api-call-service",
        "z": "ea8953c8.9d979",
        "name": "Home Occupied",
        "server": "5a39eab2.9f6814",
        "service_domain": "input_boolean",
        "service": "turn_on",
        "data": "{\"entity_id\":\"input_boolean.home_occupied\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 560,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "cc1ec8c7.424ea8",
        "type": "api-call-service",
        "z": "ea8953c8.9d979",
        "name": "Home Not Occupied",
        "server": "5a39eab2.9f6814",
        "service_domain": "input_boolean",
        "service": "turn_off",
        "data": "{\"entity_id\":\"input_boolean.home_occupied\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1100,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "3076db1c.367fb4",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Panel Door Closed",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "binary_sensor.door_window_sensor_garagepaneldoor_open",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 1320,
        "y": 820,
        "wires": [
            [
                "d4367342.3e3"
            ],
            []
        ]
    },
    {
        "id": "d4367342.3e3",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Door Closed",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "0",
        "halt_if_type": "num",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "sensor.door_window_sensor_garage_open",
        "state_type": "num",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 1560,
        "y": 820,
        "wires": [
            [
                "cce65336.ef488",
                "147243e2.6588ec"
            ],
            []
        ]
    },
    {
        "id": "436b37d3.8df3a8",
        "type": "comment",
        "z": "27f4a783.3a8dc8",
        "name": "Need to check again after the 60 seconds",
        "info": "Someone may have closed themselves in the garage \nthen opened a door when the countdown has started.",
        "x": 1460,
        "y": 780,
        "wires": []
    },
    {
        "id": "d8d24cdb.afcbb",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Bedtime Routine On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "input_boolean.bedtime_routine",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 150,
        "y": 320,
        "wires": [
            [
                "8dafb27f.9a5ad"
            ],
            []
        ]
    },
    {
        "id": "189d208.b2775e",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Delay for 7 seconds",
        "func": "setTimeout(function(){\n    node.status({fill:\"red\", shape:\"ring\", text:\" \"});\n    msg['payload'] = 'finished';\n    node.send(msg);\n}, 7000);\nnode.status({fill:\"blue\", shape:\"ring\", text:' '});",
        "outputs": 1,
        "noerr": 0,
        "x": 400,
        "y": 400,
        "wires": [
            [
                "93336d4d.51ae"
            ]
        ]
    },
    {
        "id": "8dafb27f.9a5ad",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Foyer Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.dimmer_foyer_light_level\",\"brightness\":255}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 400,
        "y": 320,
        "wires": [
            [
                "be1f3d34.c33ea"
            ]
        ]
    },
    {
        "id": "be1f3d34.c33ea",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Stairs Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.shelly_2_5_stairs_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 640,
        "y": 320,
        "wires": [
            [
                "bb2d5d27.d3def"
            ]
        ]
    },
    {
        "id": "93336d4d.51ae",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Study Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.tradfri_bulb_1\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 640,
        "y": 400,
        "wires": [
            [
                "20b6d11f.65169e"
            ]
        ]
    },
    {
        "id": "bb2d5d27.d3def",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Discreet Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.discreet_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 870,
        "y": 320,
        "wires": [
            [
                "490d7d63.a018a4"
            ]
        ]
    },
    {
        "id": "20b6d11f.65169e",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Delay for 30 seconds",
        "func": "setTimeout(function(){\n    node.status({fill:\"red\", shape:\"ring\", text:\" \"});\n    msg['payload'] = 'finished';\n    node.send(msg);\n}, 30000);\nnode.status({fill:\"blue\", shape:\"ring\", text:' '});",
        "outputs": 1,
        "noerr": 0,
        "x": 880,
        "y": 400,
        "wires": [
            [
                "e4bdb125.3177b"
            ]
        ]
    },
    {
        "id": "490d7d63.a018a4",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Rumpus Light Dim",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.lifx_rumpus_standing\",\"brightness\":39}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 150,
        "y": 400,
        "wires": [
            [
                "189d208.b2775e"
            ]
        ]
    },
    {
        "id": "e4bdb125.3177b",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Foyer Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.dimmer_foyer_light_level\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 140,
        "y": 460,
        "wires": [
            [
                "2a15af20.7e3b1"
            ]
        ]
    },
    {
        "id": "2a15af20.7e3b1",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Delay for 7 min",
        "func": "setTimeout(function(){\n    node.status({fill:\"red\", shape:\"ring\", text:\" \"});\n    msg['payload'] = 'finished';\n    node.send(msg);\n}, 420000);\nnode.status({fill:\"blue\", shape:\"ring\", text:' '});",
        "outputs": 1,
        "noerr": 0,
        "x": 400,
        "y": 460,
        "wires": [
            [
                "4121cd0e.eea244"
            ]
        ]
    },
    {
        "id": "4121cd0e.eea244",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Discreet Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.discreet_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 650,
        "y": 460,
        "wires": [
            [
                "fb2454a3.a9a9f8",
                "ab093810.0a8fd8",
                "27aa3de3.f57a62"
            ]
        ]
    },
    {
        "id": "fb2454a3.a9a9f8",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Bedtime routine off",
        "server": "5a39eab2.9f6814",
        "service_domain": "input_boolean",
        "service": "turn_off",
        "data": "{\"entity_id\":\"input_boolean.bedtime_routine\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 950,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "65c5c2d0.a444bc",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Rumpus Motion Detected Z-Wave",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.multisensor_kitchen_motion",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 190,
        "y": 1340,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "c1cd7c91.a193e",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Onkyo Volume Up",
        "server": "5a39eab2.9f6814",
        "service_domain": "media_player",
        "service": "volume_up",
        "data": "{\"entity_id\":\"media_player.onkyo_amplifier\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 150,
        "y": 1171,
        "wires": [
            []
        ]
    },
    {
        "id": "6865f91d.7b7c98",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Onkyo Volume Up",
        "server": "5a39eab2.9f6814",
        "service_domain": "media_player",
        "service": "volume_down",
        "data": "{\"entity_id\":\"media_player.onkyo_amplifier\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 150,
        "y": 1216,
        "wires": [
            []
        ]
    },
    {
        "id": "b1bd37a0.3b11a8",
        "type": "inject",
        "z": "d1ff6abb.b25cf8",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 340,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "aac1125.91b50f",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "TTS Announce",
        "server": "5a39eab2.9f6814",
        "service_domain": "tts",
        "service": "google_translate_say",
        "data": "{\"entity_id\":\"media_player.kitchen_speaker\",\"message\":\"Did you forget the coffee machine on?\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 540,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "f7046b1d.dc9608",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "Rumpus Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.lifx_rumpus_standing\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 890,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "9c2e8642.72bdf8",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Front Door Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.dimmer_foyer_light_level\",\"brightness\":255}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 480,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "a3957e3c.be42c",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Sun Below Horizon",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "below_horizon",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "sun.sun",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 1270,
        "y": 1120,
        "wires": [
            [
                "dcb53b6d.23dc48",
                "609765f4.28c1fc"
            ],
            []
        ]
    },
    {
        "id": "d172fbb1.f27a68",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Stairs Landing Motion Detected Sonoff PIR",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.tradfri_pir_2",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 220,
        "y": 1030,
        "wires": [
            [
                "8d145814.0a7528",
                "246c2d33.fcdda2",
                "169d704e.b0793"
            ],
            []
        ]
    },
    {
        "id": "4e7c2b77.4112d4",
        "type": "function",
        "z": "27f4a783.3a8dc8",
        "name": "Between 9pm and 7am",
        "func": "var d = new Date();\nvar hour = d.getHours();\n\nif(hour >= 21 || hour <= 7) {\n    msg.payload = 30;\n}\nelse {\n    msg.payload = 100;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1030,
        "y": 1080,
        "wires": [
            [
                "d3d1a423.e17d28",
                "a3957e3c.be42c"
            ]
        ]
    },
    {
        "id": "dcb53b6d.23dc48",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Stairs Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.shelly_2_5_stairs_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1540,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "609765f4.28c1fc",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Foyer Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.dimmer_foyer_light_level\",\"brightness_pct\":\"{{payload}}\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1540,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "a83b522e.8ac79",
        "type": "server-state-changed",
        "z": "d1ff6abb.b25cf8",
        "name": "Rumpus Multisensor Motion Detected",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.multisensor_kitchen_motion",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 230,
        "y": 140,
        "wires": [
            [
                "9bc6106a.d6826"
            ],
            [
                "9bc6106a.d6826"
            ]
        ]
    },
    {
        "id": "6f04e404.0c9aec",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Front Door Open",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.st_contact_sensor_1",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 480,
        "y": 240,
        "wires": [
            [
                "ba76e3fe.9494d"
            ],
            []
        ]
    },
    {
        "id": "413fdd81.edfdb4",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Laundry Sliding Door Open",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.gs_wds07_2",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 510,
        "y": 300,
        "wires": [
            [
                "d6c12f4b.97163"
            ],
            []
        ]
    },
    {
        "id": "cb10c5f.a40c238",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Patio Sliding Door Open",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.gs_wds07_3",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 500,
        "y": 360,
        "wires": [
            [
                "72c437d5.c365d8"
            ],
            []
        ]
    },
    {
        "id": "7fbaf3fb.fa0dbc",
        "type": "api-call-service",
        "z": "ff5661ef.cd5bf",
        "name": "Ettienne Push Notification",
        "server": "5a39eab2.9f6814",
        "service_domain": "notify",
        "service": "discord_notifications",
        "data": "{\"message\":\"Alarm triggered {{source}}\",\"target\":[\"624934822812319774\"]}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1550,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "324988cc.ee6e68",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Picture Frame Movement Detected",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.multisensor_dining_motion",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 540,
        "y": 420,
        "wires": [
            [
                "a31ce7ca.b3d478"
            ],
            []
        ]
    },
    {
        "id": "b18d8c07.9e61f",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Laundry Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.door_window_sensor_laundry_open",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 510,
        "y": 480,
        "wires": [
            [
                "724a7a4a.e84d94"
            ],
            []
        ]
    },
    {
        "id": "45fa67b5.8f6218",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Pantry Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.door_window_sensor_pantry_open",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 510,
        "y": 540,
        "wires": [
            [
                "6705fa0a.a50b84"
            ],
            []
        ]
    },
    {
        "id": "a09f9081.ec2b9",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Garage Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "sensor.door_window_sensor_garage_open",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "num",
        "haltifstate": "255",
        "halt_if_type": "num",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 510,
        "y": 600,
        "wires": [
            [
                "43e6690.1d70398"
            ],
            []
        ]
    },
    {
        "id": "94bab123.78c8b",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Garage Panel Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.door_window_sensor_garagepaneldoor_open",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 530,
        "y": 660,
        "wires": [
            [
                "17852f0e.fff491"
            ],
            []
        ]
    },
    {
        "id": "58e3acda.344ae4",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Stairs Closet Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "sensor.door_window_sensor_stairs_closet_open",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "num",
        "haltifstate": "255",
        "halt_if_type": "num",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 530,
        "y": 720,
        "wires": [
            [
                "d976fe61.62e4"
            ],
            []
        ]
    },
    {
        "id": "3b82aae3.8fe1f6",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Stairs Landing Motion Detected Sonoff PIR",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.tradfri_pir_2",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 560,
        "y": 900,
        "wires": [
            [
                "6e6ea.209b8916c"
            ],
            []
        ]
    },
    {
        "id": "48bb84e7.db89dc",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Rumpus Motion Detected Z-Wave",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.multisensor_kitchen_motion",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 530,
        "y": 840,
        "wires": [
            [
                "15dd6cd.e55f893"
            ],
            []
        ]
    },
    {
        "id": "2fd880fd.a32c1",
        "type": "api-current-state",
        "z": "ff5661ef.cd5bf",
        "name": "Home occupied",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "input_boolean.home_occupied",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 1320,
        "y": 540,
        "wires": [
            [],
            [
                "7fbaf3fb.fa0dbc"
            ]
        ]
    },
    {
        "id": "3356ab2d.ab3934",
        "type": "RM",
        "z": "b0dd0c0f.47706",
        "name": "Broadlink RM Pro+",
        "device": "911cc32f.93c4a",
        "action": "learn",
        "remote": "",
        "button": "",
        "fix": 1,
        "RFSweep": "true",
        "x": 350,
        "y": 280,
        "wires": [
            [
                "a7d06b7e.526488"
            ]
        ]
    },
    {
        "id": "b99f8f85.d4e6",
        "type": "inject",
        "z": "b0dd0c0f.47706",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 140,
        "y": 280,
        "wires": [
            [
                "3356ab2d.ab3934"
            ]
        ]
    },
    {
        "id": "a7d06b7e.526488",
        "type": "template",
        "z": "b0dd0c0f.47706",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{{payload.data}}",
        "output": "str",
        "x": 560,
        "y": 280,
        "wires": [
            [
                "ddc088f1.473c28"
            ]
        ]
    },
    {
        "id": "ddc088f1.473c28",
        "type": "debug",
        "z": "b0dd0c0f.47706",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 750,
        "y": 280,
        "wires": []
    },
    {
        "id": "c9f907f.ba726f8",
        "type": "api-call-service",
        "z": "b0dd0c0f.47706",
        "name": "Broadlink send command",
        "server": "5a39eab2.9f6814",
        "service_domain": "broadlink",
        "service": "send",
        "data": "{\"host\":\"192.168.1.16\",\"packet\":\"{{payload}}\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 610,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "a15d8c44.05f64",
        "type": "inject",
        "z": "b0dd0c0f.47706",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 140,
        "y": 40,
        "wires": [
            [
                "ae341130.87231"
            ]
        ]
    },
    {
        "id": "ae341130.87231",
        "type": "template",
        "z": "b0dd0c0f.47706",
        "name": "Bauhn Green 1",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "sgGwBBkIGQgYCBkIGQgIGAkYCRcZCBkIGQcZCBkIGAgKFwkYGQcZCBkIGAgJAAERCRgJGAgYGQgJFxkICRgIGBkIGQgJFwkYGAkYCBkIGQgYCAkYCRgIGBkIGAkYCBkIGAgZCAkYCRcZCBkIGAgZCAkAAREJGAkXCRgZBwkYGQgJFwkYGQgYCAkYCRcZCBkIGQgYCBkICRcJGAkYGQcZCBkIGQcZCBkHChcJGBkIGAgZCBkHCQABEQkYCRgJFxkICRgYCAkYCRgZBxkICRgIGBkIGQgYCBkIGQgJFwkYCRcZCBkIGAgZCBkIGAkIGAkYGAgZCBkIGAgJAAERCRgJGAgYGAkIGBkICRgIGBkIGQcJGAkYGAgZCBkIGAkYCAkYCBgJGBkIGQcZCBgJGAgZCAgZCRcZCBgIGQgZBwkAAREJGAkYCRgYCAkYGAgJGAkYGAgZCAkYCBgZCBkIGAgZCBkHCRgJGAkXGQgZCBgIGQgZCBkHCRgJGBgIGQgZCBgICQABEQkYCBgJGBkICRcZCAkYCBgZCBkHCRgJGBgIGQgZCBgJGAgJGAgYCRgZCBgIGQgYCBkIGQgJFwkYGQgYCRgIGQcJAAERCRgJGAkXGQgJGBgJCBgJGBgIGQgJGAkYGAgYCRgIGQgYCAkYCRgJFxkIGQgZBxkIGQgYCAkYCRgYCBkIGQcZCAgAARIJGAgYCRgZCAgYGQgJFwkYGQgYCQgYCRgYCBkIGQgYCBkICRgJFwkYGQcZCBkIGQcZCBkICRgIGBkIGAgZCBgICQABEQkYCRgJFxkICRgYCQgYCRgYCRgICRgJFxkIGQgYCBkIGQcJGAkYCRcZCBkIGAgZCBkIGAgJGAkYGAgZCBkIGAgJAAERCRgJFwkYGQgIGBkICRgIGBkIGAkJFwkYGAgZCBkIGAgZCAkYCBgJGBgJGAgZCBkIGAgZCAkXCRgZCBgJGAgZBwkAARIJFwkYCRcZCAkYGAgJGAkYGAkYCAkYCRcZCBkHGQgZCBkHCRgJGAkYGAgZCBgIGQgZCBgICRgJGBkHGQgZBxkICQABEQkYCRcJGBkICRcZCAkYCBgZCBkICBgJGBgIGQgZCBkHGQgJFwkYCRgYCRgIGQgYCRgIGQgJFwkYGQgYCBkIGQcJAAERCRgJGAkXGQgJGBgICRgJFxkIGQgJGAkXGQgZBxkIGQgYCAkYCRgJFxkIGAkYCBkIGQgYCAkYCBkYCBkIGAgZBwoAAREJFwkYCRgYCAkYGQgIGAkYGQgYCAkYCBkYCBkIGAkYCBkICRcJGAkYGAgZCBkHGQgZCBgJCRcJGBkHGQgZCBgICQABEQkYCRgIGBkICRgYCAkYCRcZCBgJCBgJGBgJGAgZCBgIGQgJGAkYCBgYCRgIGQgZCBgIGQgJGAgYGQgZCBgIGQgJAAERCRcJGAgZGAgJGBkHCRgJGBkHGQgJGAkXGQgZBxkIGQgZCAgYCRgJGBgIGQgZBxkIGQgZBwkYCRgYCBkIGQgZBwkAAREJGAkXCRgZCAkXGQgJGAkXGQgZBwkYCRgZCBgIGQgYCBkICRgJGAgYGAkYCBkIGQgYCBkICRgIGBkIGQgYCBkHCQAF3AAAAAAAAAAA",
        "output": "str",
        "x": 320,
        "y": 40,
        "wires": [
            [
                "c9f907f.ba726f8"
            ]
        ]
    },
    {
        "id": "999889a.f29a978",
        "type": "template",
        "z": "b0dd0c0f.47706",
        "name": "Bauhn Red 1",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "sgAeAgkYCBgYCQgZFwkIGQgZGAgZCAgZCBgYCRgJGAgYCRgJCBgIGQgYCRgYCRcKFwkYCRgJCBgIGQgYCRgIGAkYCAABCwkYCBgIGRgJCBgYCQgZCBgYCRgJCBgJGBgJGAgYCRgJFwkIGAkYCRgIGRgIGAkYCRgIGAkIGAgZCBkIGAgZCBkHAAEMCBgIGQgZGAgIGRgICBkIGRgIGAkIGAkYGAkYCBgJGAkYCAgZCRcJGAgZGAkYCBgJGAgYCQgZCBkIGAgZCBgJGAgAAQsIGAkYCBkXCggYGAkIGAgZGAgZCAkYCBkXCRgJGAkXChcJCBgJGAgZCBgYCRgJFwkYCRgJCBgIGQgYCRgJFwkYCAABCwkYCBkIGBgJCBkYCAgZCBgYCRgICRgJGBgJGAgYCRgIGAkIGQgYCRgIGRgIGAkYCRcJGAkIGAgZCRgIGAgZCBgIAAELCRgJGAgZGAgIGRgICBkIGRgIGQgIGAkYGAkYCRgIGAkYCAgZCBgJGAkYGAgYCRgJGAkXCQgZCBgIGQkXCRgIGAkAAREJGAgZCBgYCQgZGAgIGQgYGAkYCQgYCBkYCBgJGAkYCRcJCBgJGAkYCBkXCRgJFwkYCRgJCBgIGQgZCBgJGAgYCAABEgkYCBgIGRgICBkYCQgYCBkYCRgICBkIGBgJGAkXChcJGAkIGAkYCBgJGBgJGAkXCRgJGAgIGQgZCBgJGAgZCBgIAAXcAAAAAAAAAAAAAA==",
        "output": "str",
        "x": 310,
        "y": 100,
        "wires": [
            [
                "c9f907f.ba726f8"
            ]
        ]
    },
    {
        "id": "11bd0440.92a6cc",
        "type": "inject",
        "z": "b0dd0c0f.47706",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 140,
        "y": 100,
        "wires": [
            [
                "999889a.f29a978"
            ]
        ]
    },
    {
        "id": "5e66da3b.21e104",
        "type": "template",
        "z": "b0dd0c0f.47706",
        "name": "Bauhn Red 2",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "sgCWAQkYCBgZCAkXGQgJGAkXGQgZBwkYCRgYCBkIGQgYCBkICRgIGAkYCRcJGBkHGQgZCBkHCRgJFwkYGQgJGAgYCQABCggYCRgJFxkICRcZCAkYCRcZCBkICRcJGBkHGQgZCBgIGQgJGAkXCRgJFwkYGQgZBxkIGQgIGAkYCBgZCAkYCBgJAAEKCRcJGAkYGAgJGBkHCRgJGBgIGQgJGAgYGQgYCBkIGQgYCAkYCRcJGAkYCRcZCBgIGQgZCAgYCRgJFxkICRgIGAkAAQoJFwkYCRgYCAkYGAkIGAkYGQcZCAkXCRgYCRgIGQgZBxkICRgIGAkYCRgIGBkIGAgZCBkICBgJGAkXGQgJGAgYCQABCgkXCRgJGBgICRgZBwkYCRcZCBkICRcJGBkIGAgZCBgJGAgJGAkXCRgJGAgYGQgYCBkIGQgJFwkYCRcZCAkXCRgJAAEKCRgJFwkYGAkIGBkICRcJGBkHGQgJGAgYGQgYCBkIGQgYCAkYCRgIGAkYCBgZCBgIGQgZCAkXCRgIGRgICRgIGAkABdwAAA==",
        "output": "str",
        "x": 310,
        "y": 220,
        "wires": [
            [
                "c9f907f.ba726f8"
            ]
        ]
    },
    {
        "id": "e1415ca.ce908a",
        "type": "template",
        "z": "b0dd0c0f.47706",
        "name": "Bauhn Green 2",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "sgD6AwkXCRgYCAkYGAkIGAkYGQcZCAkYCRcZCBkIGAgZCBkHCRgJGAkYGAgJFxkIGQgZBxkICRgJFxkICRgIGAkYCQABCQkYCRgIGRgICRgYCAkYCRgYCBkICRcJGBgJGAgZCBkIGAgJGAkXCRgYCQkXGQgZBxkIGQgJFwkYGAkIGAkYCRcJAAEKCRgJGAgYGQcJGBkICRgIGBkIGQcJGAkXGQgZCBgIGQgZBwkYCRgJFxkICRcZCBkIGQgYCAkYCRcZCAkYCBgJGAkAAQkJGAkYCRcZCAkYGAgJGAkXGQgZCAkXCRgZBxkIGQgYCBkICRgIGAkYGQcJGBkIGAgZCBkICBgJGBkHCRgJGAgYCQABCggYCRgJGBgICRgZBwkYCRgYCBkICRgIGBkIGQcZCBkIGAkIGAkYCRcZCAkXGQgZCBgIGQgJFwkYGQgIGAkYCRcJAAEKCRgJFwkYGQgIGBkICRcJGBkIGAgJGAkYGAgZCBgIGQgZCAkXCRgJFxkICRgZBxkIGQgYCAkYCRcZCAkYCBgJGAgAAREJGAkXCRgZCAkXGQgJGAgYGQgYCAkYCRcZCBkIGAkYCBkICRcJGAkYGAgJFxkIGQgZCBgICRgJFxkICRgIGAkYCAABEQkYCRcJGBkICBgZCAkXCRgZBxkICRgJFxkIGAkYCBkIGQgJFwkYCBgZCAkYGAgZCBkIGAgJGAkXGQgJGAkXCRcJAAERCRgJFwkYGAkIGBkICRcJGBkIGAgJGAkXGQgYCRgIGQgYCAkYCRcJGBkICBkYCBkIGAgZCAkXCRgZCAgYCRgJFwkAAREIGAkYCBkYCAkYGQcJGAkYGAgZCAkXCRgZCBgIGQgYCRgICRgJFwkYGAkIGBkIGAgZCBkICBgJGBkHCRgJGAgYCQABEAkYCRgIGBkICRgYCAkYCBgZCBkHCRgJFxkIGQgZCBgIGQgJGAgYCRgYCAkYGQcZCBkIGAgJGAkXGQgJGAkXCRgJAAEQCRgIGAkYGQgIGBkICRcJGBkHGQgJGAkYGAgZCBgIGQgYCQgYCRgJFxkICRcZCBkIGQcZCAkXChcZCAkYCBgJFwkAAREJFwkYCRgYCAkYGAkIGAkXGQgZCAkYCBgYCRgIGQgZCBgICRgJFwkYGQgIGBkIGAgZCBkICRcJGBgIChcJGAgYCQABEAkYCRgIGBkICBkYCAkYCBgZCBkHCRgJGBgJGAgZCBgIGQgJFwkYCRgYCAkYGQcZCBkHGQgJGAkXGQgJGAkXCRgJAAEQCRgIGAkYGAkIGBkICBgJGBkHGQgJGAkXGQgZCBgIGQgYCAkYCRcJGBkICRcZCBkIGAgZCAkXCRgZCAgYCRgJFwkABdwAAAAAAAAAAAAAAAAAAA==",
        "output": "str",
        "x": 320,
        "y": 160,
        "wires": [
            [
                "c9f907f.ba726f8"
            ]
        ]
    },
    {
        "id": "593dfd6d.4534a4",
        "type": "inject",
        "z": "b0dd0c0f.47706",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 140,
        "y": 160,
        "wires": [
            [
                "e1415ca.ce908a"
            ]
        ]
    },
    {
        "id": "527f1c6f.46d3d4",
        "type": "inject",
        "z": "b0dd0c0f.47706",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 140,
        "y": 220,
        "wires": [
            [
                "5e66da3b.21e104"
            ]
        ]
    },
    {
        "id": "844ebed5.da937",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Broadlink Send",
        "server": "5a39eab2.9f6814",
        "service_domain": "broadlink",
        "service": "send",
        "data": "{\"host\":\"192.168.1.16\",\"packet\":\"{{payload}}\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1500,
        "y": 2740,
        "wires": [
            []
        ]
    },
    {
        "id": "2c890915.2a7056",
        "type": "template",
        "z": "e594dd4a.60761",
        "name": "Amp Power Toggle",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgBQAAABJ5EUERQ2FBAUERQ1FBEUNhM2FBETERQ2FDUUERQ1FDYUEBQ2FDUUERQ1FBEUERQ1FDYTERQRFDUUERQ1FDYUERMRFAAFFwABKEgUAA0FAAAAAAAAAAA=",
        "output": "str",
        "x": 1110,
        "y": 2740,
        "wires": [
            [
                "844ebed5.da937"
            ]
        ]
    },
    {
        "id": "91d77af.66ad288",
        "type": "template",
        "z": "e594dd4a.60761",
        "name": "TV Power Toggle",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgAyAXQ4EA0QKRANEA0QDQ8NEA0QDRANEA0PDRANEA0QKRANEA0QDQ8NEA0QDRANEA0PDRAqEA0PDRANEA0QDQ8NEA0QDRAqDw0QKhApECoQKRANEA0QKg8NECoQKRAqECkQDRAqEAAJk3M4EA0QKg8NEA0QDRANEA0PDRANEA0QDQ8NEA0QKhAMEA0QDRANEA0PDRANEA0QDQ8qEA0QDQ8NEA0QDRANEA0PDRAqEA0PKhAqDyoQKhANDw0QKhANDyoQKg8qECoQDQ8qEAAJk3Q4Dw0QKhANEA0PDRANEA0QDQ8NEA0QDRANDw0QKhANEA0PDRANEA0QDQ8NEA0QDRApEA0QDRANEA0PDRANEA0QDQ8qEA0QKRAqECoPKhANEA0PKhANECkQKhApECoQDRApEAANBQAAAAAAAA==",
        "output": "str",
        "x": 1110,
        "y": 2840,
        "wires": [
            [
                "844ebed5.da937"
            ]
        ]
    },
    {
        "id": "629bdf7e.7477a",
        "type": "template",
        "z": "e594dd4a.60761",
        "name": "Amp Vol+",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgCQAAABJZQSEhI4EhISExI3ExISOBI3EjcSExI4EjcSExI3EjcTEhITEjcSExITEhISExITEhISOBITEjcSNxI4EjcSOBI3EgAE9QABJZMSExI3EhMSExI3EhMSNxI4EjcSExI3EjgSEhI4EjcSExITEjcSExISEhMSExISEhMSNxMSEjgSNxI3EjgSNxI4EgANBQAAAAAAAAAA",
        "output": "str",
        "x": 1080,
        "y": 2783,
        "wires": [
            [
                "844ebed5.da937"
            ]
        ]
    },
    {
        "id": "eeabc7f7.2b9b88",
        "type": "template",
        "z": "e594dd4a.60761",
        "name": "Amp Vol-",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgCMABQRFDUUERQRFDUUERQ1FDUVNRQRFDUUNhQQFTUUNRQRFDUUNhQQFBEUERQQFRAUERQQFRAUNRU1FDUVNRQ1FDYUAATyAAEnkhQQFTUUERQQFDYUEBQ2FDUUNhQQFDYUNRQRFDUUNhQQFDYUNRQRFBEUEBQRFBEUEBUQFBEUNRQ2FDUUNRU1FDUUAA0FAAAAAAAAAAAAAAAA",
        "output": "str",
        "x": 1080,
        "y": 2880,
        "wires": [
            [
                "844ebed5.da937"
            ]
        ]
    },
    {
        "id": "d2ed4570.940a98",
        "type": "server-state-changed",
        "z": "ea8953c8.9d979",
        "name": "House Guest Toggle",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "input_boolean.house_guests",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 130,
        "y": 620,
        "wires": [
            [
                "304decee.e9de34"
            ],
            [
                "ef9c8b8f.bfbb18"
            ]
        ]
    },
    {
        "id": "ef9c8b8f.bfbb18",
        "type": "api-current-state",
        "z": "ea8953c8.9d979",
        "name": "Ettienne Home Person",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "person.ettienne",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 580,
        "y": 620,
        "wires": [
            [],
            [
                "cb2b1f4e.fd3bb"
            ]
        ]
    },
    {
        "id": "cb2b1f4e.fd3bb",
        "type": "api-current-state",
        "z": "ea8953c8.9d979",
        "name": "Kelly Home Person",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "person.kelly",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 830,
        "y": 620,
        "wires": [
            [],
            [
                "cc1ec8c7.424ea8"
            ]
        ]
    },
    {
        "id": "ba76e3fe.9494d",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "front door opened",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "front door got opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 240,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "6e6ea.209b8916c",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "stairs landing motion",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "stairs landing motion triggered",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 900,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "15dd6cd.e55f893",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "rumpus motion zwave",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "rumpus zwave motion triggered",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 840,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "d976fe61.62e4",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "stairs closet",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "stairs closet opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 700,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "17852f0e.fff491",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "garage panel",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "garage panel door opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 660,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "43e6690.1d70398",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "garage house door",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "garage house door opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 600,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "6705fa0a.a50b84",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "pantry door",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "pantry door opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 540,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "724a7a4a.e84d94",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "laundry door",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "laundry door opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 480,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "a31ce7ca.b3d478",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "picture frame motion",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "picture frame motion triggered",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 420,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "72c437d5.c365d8",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "patio sliding door",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "patio sliding door opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 360,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "d6c12f4b.97163",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "laundry sliding door",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "laundry sliding door opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 300,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "4a46042a.b04d2c",
        "type": "http in",
        "z": "6e7a064f.40b368",
        "name": "Shinobi Incoming Motion Trigger GET",
        "url": "/camera/:monitor_id/:group_key/trigger",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 140,
        "wires": [
            [
                "139f41ee.abf39e",
                "336d7d4d.ec0b42"
            ]
        ]
    },
    {
        "id": "d2e89fd1.06891",
        "type": "debug",
        "z": "6e7a064f.40b368",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1110,
        "y": 180,
        "wires": []
    },
    {
        "id": "139f41ee.abf39e",
        "type": "http response",
        "z": "6e7a064f.40b368",
        "name": "HTTP 200 Response",
        "statusCode": "200",
        "headers": {
            "action": "node-red-flow-invoked"
        },
        "x": 480,
        "y": 120,
        "wires": []
    },
    {
        "id": "4629c415.9b478c",
        "type": "template",
        "z": "6e7a064f.40b368",
        "name": "Transform Output",
        "field": "action_details",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"monitor_id\": \"{{req.params.monitor_id}}\",\n    \"group_key\": \"{{req.params.group_key}}\",\n    \"confidence\": \"{{payload.confidence}}\", \n    \"shinobi_host\": \"{{{global.shinobiHost}}}\",\n    \"shinobi_url\": \"{{{global.shinobiHost}}}/jpeg/{{req.params.group_key}}/{{req.params.monitor_id}}/s.jpg?timestamp={{_msgid}}\",\n    \"filename\": \"/data/camera-images/{{_msgid}}.jpg\", \n    \"hass_filename\": \"/config/www/camera-images/{{_msgid}}.jpg\",\n    \"target\": \"624934647675224084\"\n    \n}",
        "output": "json",
        "x": 670,
        "y": 180,
        "wires": [
            [
                "b7e28a5d.d74a48"
            ]
        ]
    },
    {
        "id": "4ea0a155.4acad",
        "type": "api-call-service",
        "z": "6e7a064f.40b368",
        "name": "Ettienne Push Notification",
        "server": "5a39eab2.9f6814",
        "service_domain": "notify",
        "service": "discord_notifications",
        "data": "{\"message\":\"Camera motion detected {{_msgid}} - {{action_details.monitor_id}}\",\"data\":{\"images\":[\"{{{action_details.hass_filename}}}\"]},\"target\":[\"{{action_details.target}}\"]}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 910,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "b7e28a5d.d74a48",
        "type": "http request",
        "z": "6e7a064f.40b368",
        "name": "Request Camera JPG",
        "method": "GET",
        "ret": "bin",
        "paytoqs": false,
        "url": "{{{action_details.shinobi_url}}}",
        "tls": "",
        "proxy": "",
        "authType": "",
        "x": 900,
        "y": 180,
        "wires": [
            [
                "d2e89fd1.06891",
                "e6ce01e2.b71ca"
            ]
        ]
    },
    {
        "id": "abfde8b5.c97ab8",
        "type": "file",
        "z": "6e7a064f.40b368",
        "name": "Save JPG",
        "filename": "",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 640,
        "y": 240,
        "wires": [
            [
                "4ea0a155.4acad"
            ]
        ]
    },
    {
        "id": "cc539556.4c2eb8",
        "type": "inject",
        "z": "6e7a064f.40b368",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 120,
        "y": 400,
        "wires": [
            [
                "93aceebe.d33a7"
            ]
        ]
    },
    {
        "id": "c6abf74.bc42008",
        "type": "debug",
        "z": "6e7a064f.40b368",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 530,
        "y": 400,
        "wires": []
    },
    {
        "id": "93aceebe.d33a7",
        "type": "template",
        "z": "6e7a064f.40b368",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "This is the payload: {{global.shinobiHost}} !",
        "output": "str",
        "x": 320,
        "y": 400,
        "wires": [
            [
                "c6abf74.bc42008"
            ]
        ]
    },
    {
        "id": "e6ce01e2.b71ca",
        "type": "change",
        "z": "6e7a064f.40b368",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "action_details.filename",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 240,
        "wires": [
            [
                "abfde8b5.c97ab8"
            ]
        ]
    },
    {
        "id": "336d7d4d.ec0b42",
        "type": "api-current-state",
        "z": "6e7a064f.40b368",
        "name": "Home occupied",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "input_boolean.home_occupied",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 460,
        "y": 180,
        "wires": [
            [],
            [
                "4629c415.9b478c"
            ]
        ]
    },
    {
        "id": "f7c9e5df.0d8d38",
        "type": "inject",
        "z": "823d3fb7.65d29",
        "name": "7PM Bedtime",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "00 19 * * *",
        "once": false,
        "onceDelay": 0.1,
        "x": 160,
        "y": 100,
        "wires": [
            [
                "bc582b00.03f548"
            ]
        ]
    },
    {
        "id": "bc582b00.03f548",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "TTS Announce",
        "server": "5a39eab2.9f6814",
        "service_domain": "tts",
        "service": "google_translate_say",
        "data": "{\"entity_id\":\"media_player.everywhere\",\"message\":\"Its bedtime for the babies, lets go to bed\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 440,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "9c92a3d7.8e664",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Flood Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "switch",
        "service": "turn_on",
        "data": "{\"entity_id\":\"switch.tp_link_3\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 780,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "147243e2.6588ec",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Flood Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{\"entity_id\":\"switch.tp_link_3\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1800,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "47da4960.9cb9e8",
        "type": "trigger",
        "z": "d1ff6abb.b25cf8",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "2",
        "extend": false,
        "units": "min",
        "reset": "on",
        "bytopic": "all",
        "name": "2 Minutes No Movement",
        "x": 590,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "d479eebc.741a9",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "Dressing Room Lights Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_dimmer_dressing_room\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 910,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "fa01e8b.3d37a18",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Lounge Music Routine On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "input_boolean.lounge_music",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 170,
        "y": 1040,
        "wires": [
            [
                "b130b76b.95bab8"
            ],
            [
                "193b6411.343e6c"
            ]
        ]
    },
    {
        "id": "b130b76b.95bab8",
        "type": "template",
        "z": "823d3fb7.65d29",
        "name": "Amp On",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgBQAAABJ5MSEhI2EhISEhI2EhISNhI2EjYSEhI2EjYSEhI2EjYSEhISEhISNhISEhISEhISEhISNhI2EhISNhI2EjYSNhI2EgAFAQABJ0kSAAxTDQUAAAAAAAA=",
        "output": "str",
        "x": 520,
        "y": 880,
        "wires": [
            [
                "5cacbb8a.1a5644"
            ]
        ]
    },
    {
        "id": "aac7daa4.34e608",
        "type": "template",
        "z": "823d3fb7.65d29",
        "name": "CBL/SAT Input",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgBYAAABJpMSExI3EhMSExI3EhMSNxI3EzcSExI3EjgSEhI4EjcSExUPEjgSNxI4EhISExITFg4SOBISExISExI3EjgSNxI4EgAE9AABJUsSAAxDAAElSxIADQU=",
        "output": "str",
        "x": 940,
        "y": 880,
        "wires": [
            [
                "5098e75c.796f98"
            ]
        ]
    },
    {
        "id": "5cacbb8a.1a5644",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Broadlink Send",
        "server": "5a39eab2.9f6814",
        "service_domain": "broadlink",
        "service": "send",
        "data": "{\"host\":\"192.168.1.16\",\"packet\":\"{{payload}}\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 720,
        "y": 880,
        "wires": [
            [
                "aac7daa4.34e608"
            ]
        ]
    },
    {
        "id": "5098e75c.796f98",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Broadlink Send",
        "server": "5a39eab2.9f6814",
        "service_domain": "broadlink",
        "service": "send",
        "data": "{\"host\":\"192.168.1.16\",\"packet\":\"{{payload}}\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1160,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "193b6411.343e6c",
        "type": "template",
        "z": "823d3fb7.65d29",
        "name": "BD/DVD Input",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgBgAAABJZQSEhI4EhMSEhI4EhISOBI3EhMSExI3EjcSExI4EjcSExISEhMSNxI4EhMSEhITEjcSOBI3EhMSExI3EjcSOBITEgAFGQABJUoTAAxDAAElSxIADEMAASpGEgANBQAAAAAAAAAA",
        "output": "str",
        "x": 540,
        "y": 1049,
        "wires": [
            [
                "37b3dd3e.5b87a2"
            ]
        ]
    },
    {
        "id": "37b3dd3e.5b87a2",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Broadlink Send",
        "server": "5a39eab2.9f6814",
        "service_domain": "broadlink",
        "service": "send",
        "data": "{\"host\":\"192.168.1.16\",\"packet\":\"{{payload}}\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 780,
        "y": 1049,
        "wires": [
            []
        ]
    },
    {
        "id": "55e5dea6.fa0f7",
        "type": "template",
        "z": "e594dd4a.60761",
        "name": "TV Power On Discrete",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgVmAHE4Dg4OKg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4OKg4ODg4ODg4ODg4ODg4ODg4ODg4qDg4ODg4ODg4ODg4ODg4ODg4ODioOKg4qDioOKg4ODg4ODg4qDioOKg4qDioODg4qDgAJlQ0F",
        "output": "str",
        "x": 160,
        "y": 1360,
        "wires": [
            []
        ]
    },
    {
        "id": "eb06df45.c0196",
        "type": "template",
        "z": "e594dd4a.60761",
        "name": "TV Power Off Discrete",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgVmAHE4Dg4OKg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4OKg4ODg4ODg4ODg4ODg4ODg4ODg4qDg4ODg4ODg4ODg4ODg4ODg4qDioOKg4qDioOKg4ODg4OKg4qDioOKg4qDioODg4qDgAJlQ0F",
        "output": "str",
        "x": 160,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "e896fd64.5f104",
        "type": "template",
        "z": "e594dd4a.60761",
        "name": "AMP Power On Discrete",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgBQAAABJ5MSEhI2EhISEhI2EhISNhI2EjYSEhI2EjYSEhI2EjYSEhISEhISNhISEhISEhISEhISNhI2EhISNhI2EjYSNhI2EgAFAQABJ0kSAAxTDQUAAAAAAAA=",
        "output": "str",
        "x": 170,
        "y": 1320,
        "wires": [
            []
        ]
    },
    {
        "id": "e246310c.85587",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Downstairs Speaker Group Playing",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "media_player.downstairs",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "playing",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 200,
        "y": 880,
        "wires": [
            [
                "b130b76b.95bab8"
            ],
            [
                "33d5b269.74328e"
            ]
        ]
    },
    {
        "id": "984dbc07.b46aa",
        "type": "server-state-changed",
        "z": "d1ff6abb.b25cf8",
        "name": "Master Bathroom Extractor Fan On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "switch.shelly_2_5_master_bathroom_extractor",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 220,
        "y": 242,
        "wires": [
            [
                "bb8290ff.7ae97"
            ],
            []
        ]
    },
    {
        "id": "bb8290ff.7ae97",
        "type": "trigger",
        "z": "d1ff6abb.b25cf8",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "5",
        "extend": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "name": "Wait for 5 minutes",
        "x": 570,
        "y": 242,
        "wires": [
            [
                "8cf3895e.ec7548"
            ]
        ]
    },
    {
        "id": "8cf3895e.ec7548",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "Extractor Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{\"entity_id\":\"switch.shelly_2_5_master_bathroom_extractor\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 870,
        "y": 242,
        "wires": [
            []
        ]
    },
    {
        "id": "10cba9c8.90d376",
        "type": "server-state-changed",
        "z": "d1ff6abb.b25cf8",
        "name": "Kids Bathroom Extractor Fan On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "switch.shelly_2_5_kids_bathroom_extractor",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 210,
        "y": 302,
        "wires": [
            [
                "25c076d3.d6444a"
            ],
            []
        ]
    },
    {
        "id": "25c076d3.d6444a",
        "type": "trigger",
        "z": "d1ff6abb.b25cf8",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "5",
        "extend": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "name": "Wait for 5 minutes",
        "x": 570,
        "y": 302,
        "wires": [
            [
                "55c1e0c2.3e88d"
            ]
        ]
    },
    {
        "id": "55c1e0c2.3e88d",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "Extractor Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{\"entity_id\":\"switch.shelly_2_5_kids_bathroom_extractor\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 870,
        "y": 302,
        "wires": [
            []
        ]
    },
    {
        "id": "bef39887.1b7ec8",
        "type": "server-state-changed",
        "z": "d1ff6abb.b25cf8",
        "name": "Upstairs Toilet Light On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level_3",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 180,
        "y": 389,
        "wires": [
            [
                "53b5f2a.e5a580c"
            ],
            [
                "53b5f2a.e5a580c"
            ]
        ]
    },
    {
        "id": "da09d68f.b33588",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "Turn off Toilet Lights",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level_3\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 900,
        "y": 389,
        "wires": [
            []
        ]
    },
    {
        "id": "53b5f2a.e5a580c",
        "type": "trigger",
        "z": "d1ff6abb.b25cf8",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "30",
        "extend": false,
        "units": "min",
        "reset": "off",
        "bytopic": "all",
        "name": "30 Minutes",
        "x": 550,
        "y": 389,
        "wires": [
            [
                "da09d68f.b33588"
            ]
        ]
    },
    {
        "id": "e5193b28.90c048",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Sony TV Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "media_player",
        "service": "turn_off",
        "data": "{\"entity_id\":\"media_player.sony_bravia_tv\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1250,
        "y": 2680,
        "wires": [
            []
        ]
    },
    {
        "id": "7d89072d.38d008",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Sony TV On",
        "server": "5a39eab2.9f6814",
        "service_domain": "media_player",
        "service": "turn_on",
        "data": "{\"entity_id\":\"media_player.sony_bravia_tv\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1250,
        "y": 2640,
        "wires": [
            []
        ]
    },
    {
        "id": "9198f0a3.5ee2c",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": " Front Door Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"switch.aeon_labs_dsc18103_micro_smart_switch_2nd_edition_switch_2\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 570,
        "y": 1880,
        "wires": [
            []
        ]
    },
    {
        "id": "822602a.5c051",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Foyer Standing Lamp Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.dimmer_foyer_light_level\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 610,
        "y": 1920,
        "wires": [
            []
        ]
    },
    {
        "id": "7693dfac.811d3",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Alex Kitchen Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_1_alex_kitchen_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 580,
        "y": 1960,
        "wires": [
            []
        ]
    },
    {
        "id": "3ec87a06.4ff786",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Pantry Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.lifx_pantry\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 560,
        "y": 2000,
        "wires": [
            []
        ]
    },
    {
        "id": "4109e42.497951c",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Laundry Lights Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_1_laundry\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 570,
        "y": 2040,
        "wires": [
            []
        ]
    },
    {
        "id": "1fdc477.487ceb9",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Study Table Lamp Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.tradfri_bulb_1\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 600,
        "y": 2080,
        "wires": [
            []
        ]
    },
    {
        "id": "cb73e99d.71eec8",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Study Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_1_study_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 560,
        "y": 2120,
        "wires": [
            []
        ]
    },
    {
        "id": "cc63de0e.0ec94",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Family Room Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level_4\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 580,
        "y": 2160,
        "wires": [
            []
        ]
    },
    {
        "id": "6974e2dd.6038fc",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Stairs Closet Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.lifx_stairs_closet\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 580,
        "y": 2200,
        "wires": [
            []
        ]
    },
    {
        "id": "85886241.b88fa",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Downstairs Toilet Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"switch.aeon_labs_dsc18103_micro_smart_switch_2nd_edition_switch\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 590,
        "y": 2240,
        "wires": [
            []
        ]
    },
    {
        "id": "8f3410c8.0297f",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Powder Room Basin Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_2_5_powder_room_basin_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 610,
        "y": 2280,
        "wires": [
            []
        ]
    },
    {
        "id": "9210a131.c79cf",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Stairs Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_2_5_stairs_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 560,
        "y": 2320,
        "wires": [
            []
        ]
    },
    {
        "id": "790ccf3f.8bb74",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Lounge Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.aeon_labs_zw111_nano_dimmer_level\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 560,
        "y": 2360,
        "wires": [
            []
        ]
    },
    {
        "id": "57e54d0e.155fb4",
        "type": "server-state-changed",
        "z": "e594dd4a.60761",
        "name": "Turn off upstairs lights",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "input_boolean.off_upstairs_lights",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 160,
        "y": 560,
        "wires": [
            [
                "dac60e5f.a75de"
            ],
            []
        ]
    },
    {
        "id": "e60c716c.0e6f4",
        "type": "server-state-changed",
        "z": "e594dd4a.60761",
        "name": "Turn off downstairs lights",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "input_boolean.off_downstairs_lights",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 170,
        "y": 820,
        "wires": [
            [
                "7f9a2e57.51d76"
            ],
            []
        ]
    },
    {
        "id": "a5c7e5d.0618718",
        "type": "server-state-changed",
        "z": "e594dd4a.60761",
        "name": "Turn off all lights",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "input_boolean.off_all_lights",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 140,
        "y": 700,
        "wires": [
            [
                "f4a95c2f.07974",
                "7f9a2e57.51d76",
                "dac60e5f.a75de",
                "924ef799.d4d6e8"
            ],
            []
        ]
    },
    {
        "id": "d2900a52.2d3b58",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Downstairs Lights off routine off",
        "server": "5a39eab2.9f6814",
        "service_domain": "input_boolean",
        "service": "turn_off",
        "data": "{\"entity_id\":\"input_boolean.off_downstairs_lights\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 610,
        "y": 2440,
        "wires": [
            []
        ]
    },
    {
        "id": "f4a95c2f.07974",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "All Lights off routine off",
        "server": "5a39eab2.9f6814",
        "service_domain": "input_boolean",
        "service": "turn_off",
        "data": "{\"entity_id\":\"input_boolean.off_all_lights\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 580,
        "y": 695,
        "wires": [
            []
        ]
    },
    {
        "id": "93cb2f56.48b6e",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Study Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "lifx",
        "service": "effect_pulse",
        "data": "{\"entity_id\":\"light.tradfri_bulb_1\",\"cycles\":\"3\",\"color_name\":\"tomato\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 340,
        "y": 1440,
        "wires": [
            []
        ]
    },
    {
        "id": "2b18feb2.652772",
        "type": "inject",
        "z": "27f4a783.3a8dc8",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 140,
        "y": 1440,
        "wires": [
            [
                "93cb2f56.48b6e"
            ]
        ]
    },
    {
        "id": "fbd63ab.09202c8",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Standing Lamp On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.dimmer_smart_energy_illum_light_level\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1110,
        "y": 2540,
        "wires": [
            []
        ]
    },
    {
        "id": "b42d48a9.e72f28",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Standing Lamp Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.dimmer_smart_energy_illum_light_level\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1110,
        "y": 2579,
        "wires": [
            []
        ]
    },
    {
        "id": "7264e89.5aed918",
        "type": "template",
        "z": "e594dd4a.60761",
        "name": "Plug #2 on",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "sgCWAQkXCRcaBwkYGQcKFwkXGQgZBwoXChcZBxkIGQcaBxkHChcJFwoXGQcKFxkIGAgZCBkHCRgJFxkICRcKFwkYCQABCQkXChcJFxoHCRcaBwkYCRcZCBkHChcJFxoHGQgYCBkIGAgJGAkXChcZCAkXGQcaBxkIGQcKFwkXGgcJGAkXCRcKAAEJCRcJGAkXGQgJFxoHCRgJFxkIGQcKFwkXGgcZBxoHGQgZBwkYCRcKFxkHChcZCBgIGQcaBwkYCRcZCAkXChcJFwkAAQoJFwkYCRcZCAkXGQgJGAkXGQgYCAkYCRcaBxkIGAgZBxoHChcJFwoXGQcKFxkHGQgZCBgICRcKFxkICRcJGAkXCgABCAoXCRcKFxkICRcZCAkXChcZCBkHCRgJFxkHGgcZCBkHGQgJFwoXCRgYCAkYGAgZBxoHGQgJFwkYGQgJFwkYCRcJAAEJChcJGAkXGgcJFxkICRgIGBkHGgcKFwkXGQgZCBgIGQcaBwkYCRcJFxoHChcZBxkIGQcaBwkYCRcZBwoXChcJFwkABdwAAA==",
        "output": "str",
        "x": 133,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "470a05b1.ea4cec",
        "type": "template",
        "z": "e594dd4a.60761",
        "name": "Plug #2 off",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "sgCWAQoXCRcaBwkYGAgJFwoXGQgZBwoXCRcZCBkHGgcZCBkHCRgJFwkXChgJFxkHGQgZCBgICRgJFwoXGQcJGAkXCQABCQoXChYKFxkICRcZCAkXChcZCBkHCRgJFxkIGQcZCBkHGgcJGAkXChYKFwoWGgcZCBkHGQgJFwoXCRcZCAkXChcJAAEJChcJFwkYGQcKFxkHChcJGBgIGQgJFwkYGQcaBxkIGAgZCAkXCRgJFwkYCRcZCBkHGQgZCAkXCRcKFxkICRcJFwkAAQoJFwoXCRcaBwoXGQcKFwkXGQgZBwoXCRgZBxkIGAgZBxoHChcJFwoXCRgJFxkHGgcZCBkHCRgJFwkYGQcKFwkXCQABCgkXChcJFxkICRcaBwkYCRcZBxoHChcJFxkIGQcaBxkIGAgJGAkXCRcKFwkYGQcaBxkHGQgJFwoXCRgYCAkXChcJAAEJChcJGAkXGgcJFxkICRcKFxkIGQcJFwoXGQgZBxkIGQcZCAkXChcJGAkXCRcaBxkIGQcZCAkXChcJFxkICRgJFwkABdwAAA==",
        "output": "str",
        "x": 133,
        "y": 1440,
        "wires": [
            []
        ]
    },
    {
        "id": "3fac9b26.9c1194",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "RCWL-0516-Microwave-Study Movement",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.rcwl_0516_motion_1",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 220,
        "y": 1220,
        "wires": [
            [
                "80384bc9.733eb8"
            ],
            []
        ]
    },
    {
        "id": "80384bc9.733eb8",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Is Dark",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "binary_sensor.is_dark",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 520,
        "y": 1220,
        "wires": [
            [
                "b6d2df30.4a3d9"
            ],
            []
        ]
    },
    {
        "id": "b6d2df30.4a3d9",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Study Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.tradfri_bulb_1\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 720,
        "y": 1220,
        "wires": [
            []
        ]
    },
    {
        "id": "3e5df0e0.b4455",
        "type": "server-state-changed",
        "z": "d1ff6abb.b25cf8",
        "name": "RCWL-0516-Microwave-Study Movement",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.rcwl_0516_motion_1",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 240,
        "y": 580,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "fb008c26.f2097",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "Study Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.tradfri_bulb_1\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 880,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "bb42fd54.effe9",
        "type": "trigger",
        "z": "d1ff6abb.b25cf8",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "30",
        "extend": false,
        "units": "s",
        "reset": "on",
        "bytopic": "all",
        "name": "30 Seconds No Movement",
        "x": 600,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "7ec8eea6.58062",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "TTS Announce",
        "server": "5a39eab2.9f6814",
        "service_domain": "tts",
        "service": "google_translate_say",
        "data": "{\"entity_id\":\"{{target}}\",\"message\":\"{{announce}}\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 960,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "e00dc012.6a07d",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Calc Day of Year",
        "func": "var now = new Date();\nvar start = new Date(now.getFullYear(), 0, 0);\nvar diff = now - start;\nvar oneDay = 1000 * 60 * 60 * 24;\nvar dayofYear = Math.floor(diff / oneDay);\nvar accouncementCommon = \"Dont forget to put out the bins, \"\n\nif(dayofYear % 2 === 0) {\n    msg.announce = accouncementCommon + \"its Yellow bin day today, take out the recycling\";\n}\nelse {\n    msg.announce = accouncementCommon + \"its Green bin day today, take out the green waste\";\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 770,
        "y": 200,
        "wires": [
            [
                "7ec8eea6.58062"
            ]
        ]
    },
    {
        "id": "68843875.77f2a8",
        "type": "inject",
        "z": "823d3fb7.65d29",
        "name": "Manual Test",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 150,
        "y": 180,
        "wires": [
            [
                "34825c1d.721ca4"
            ]
        ]
    },
    {
        "id": "8382d4ea.df9258",
        "type": "template",
        "z": "823d3fb7.65d29",
        "name": "Target All Speakers",
        "field": "target",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "media_player.everywhere",
        "output": "str",
        "x": 490,
        "y": 220,
        "wires": [
            [
                "e00dc012.6a07d"
            ]
        ]
    },
    {
        "id": "34825c1d.721ca4",
        "type": "template",
        "z": "823d3fb7.65d29",
        "name": "Target Kitchen Speaker",
        "field": "target",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "media_player.kitchen_speaker",
        "output": "str",
        "x": 510,
        "y": 180,
        "wires": [
            [
                "e00dc012.6a07d"
            ]
        ]
    },
    {
        "id": "33d5b269.74328e",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Delay for 30 seconds",
        "func": "setTimeout(function(){\n    node.status({fill:\"red\", shape:\"ring\", text:\" \"});\n    msg['payload'] = 'finished';\n    node.send(msg);\n}, 30000);\nnode.status({fill:\"blue\", shape:\"ring\", text:' '});",
        "outputs": 1,
        "noerr": 0,
        "x": 560,
        "y": 1000,
        "wires": [
            [
                "f4302aa0.a75cd8"
            ]
        ]
    },
    {
        "id": "f4302aa0.a75cd8",
        "type": "api-current-state",
        "z": "823d3fb7.65d29",
        "name": "Check is Media Player is still off",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "media_player.downstairs",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 830,
        "y": 1000,
        "wires": [
            [
                "193b6411.343e6c"
            ],
            []
        ]
    },
    {
        "id": "58705ad5.2c3b34",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Change Speaker Volume",
        "server": "5a39eab2.9f6814",
        "service_domain": "media_player",
        "service": "volume_set",
        "data": "{\"entity_id\":\"media_player.everywhere\",\"volume_level\":0.4}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 430,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "aba39d3e.467e6",
        "type": "inject",
        "z": "823d3fb7.65d29",
        "name": "Manual Test",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 150,
        "y": 40,
        "wires": [
            [
                "58705ad5.2c3b34"
            ]
        ]
    },
    {
        "id": "8fa5fd26.d785",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Kitchen Light is Turned On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "light.shelly_1_kitchen_light",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 150,
        "y": 540,
        "wires": [
            [
                "70554dd5.f44484"
            ],
            [
                "f59a7c8b.56424"
            ]
        ]
    },
    {
        "id": "70554dd5.f44484",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Alex Kitchen Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.shelly_1_alex_kitchen_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 780,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "f59a7c8b.56424",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Alex Kitchen Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_1_alex_kitchen_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 780,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "9c3fa3b4.31473",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Kitchen Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_1_kitchen_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 560,
        "y": 2400,
        "wires": [
            []
        ]
    },
    {
        "id": "39d9c39f.893ffc",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "AMP TV Source On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "switch.amp_tv",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 150,
        "y": 600,
        "wires": [
            [
                "42bc43e0.39980c"
            ],
            [
                "5c7ae04d.83d94"
            ]
        ]
    },
    {
        "id": "42bc43e0.39980c",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "AMP Music Source Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{\"entity_id\":\"switch.amp_music\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 440,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "951c7c8.d80b38",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "AMP TV Source Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{\"entity_id\":\"switch.amp_tv\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 430,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "b320a94f.e30288",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "AMP Music Source On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "switch.amp_music",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 160,
        "y": 680,
        "wires": [
            [
                "951c7c8.d80b38"
            ],
            [
                "c0cadf02.29ec2"
            ]
        ]
    },
    {
        "id": "5c7ae04d.83d94",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "AMP Music Source On",
        "server": "5a39eab2.9f6814",
        "service_domain": "switch",
        "service": "turn_on",
        "data": "{\"entity_id\":\"switch.amp_music\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 440,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "c0cadf02.29ec2",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "AMP TV Source On",
        "server": "5a39eab2.9f6814",
        "service_domain": "switch",
        "service": "turn_on",
        "data": "{\"entity_id\":\"switch.amp_tv\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 430,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "8d145814.0a7528",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Is Dark",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "binary_sensor.is_dark",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 740,
        "y": 1080,
        "wires": [
            [
                "4e7c2b77.4112d4"
            ],
            []
        ]
    },
    {
        "id": "37ca2198.42581e",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Kitchen Light Turn On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "light.shelly_1_kitchen_light",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 160,
        "y": 1200,
        "wires": [
            [
                "48ae38b9.be3558"
            ],
            []
        ]
    },
    {
        "id": "48ae38b9.be3558",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Between 6am and 8am",
        "func": "var d = new Date();\nvar hour = d.getHours();\nmsg.continue = false;\n\nif(hour >= 6 && hour <= 8) {\n    msg.continue = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 490,
        "y": 1200,
        "wires": [
            [
                "c0d87ff7.1651a"
            ]
        ]
    },
    {
        "id": "c0d87ff7.1651a",
        "type": "switch",
        "z": "823d3fb7.65d29",
        "name": "Time Window Test",
        "property": "continue",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 770,
        "y": 1200,
        "wires": [
            [
                "501641d2.3c769"
            ],
            []
        ]
    },
    {
        "id": "501641d2.3c769",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Turn on Coffee Machine",
        "server": "5a39eab2.9f6814",
        "service_domain": "switch",
        "service": "turn_on",
        "data": "{\"entity_id\":\"switch.tp_link_1\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1050,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "f1407785.f16db8",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Laundry Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.door_window_sensor_laundry_cupboard_open",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 151,
        "y": 100,
        "wires": [
            [
                "f41541aa.8d4ff"
            ],
            [
                "73950d0b.f9b674"
            ]
        ]
    },
    {
        "id": "35979dc0.132282",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Alex Light Slow Fade Off 30 min",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.lifx_bulb_1\",\"transition\":\"900\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1039,
        "y": 431,
        "wires": [
            [
                "8e1d1e1a.ccadb"
            ]
        ]
    },
    {
        "id": "8e1d1e1a.ccadb",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "TTS Announce",
        "server": "5a39eab2.9f6814",
        "service_domain": "tts",
        "service": "google_translate_say",
        "data": "{\"entity_id\":\"media_player.upstairs\",\"message\":\"Alex light slowly fading\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1290,
        "y": 410,
        "wires": [
            []
        ]
    },
    {
        "id": "74c842ef.781fcc",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "Push Button 1",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2615892",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 500,
        "y": 2860,
        "wires": [
            []
        ]
    },
    {
        "id": "fcd251cc.9ec8f",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Asakuki Diffuser On",
        "server": "5a39eab2.9f6814",
        "service_domain": "fan",
        "service": "turn_on",
        "data": "{\"entity_id\":\"fan.diffuser\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1210,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "3df7c826.175758",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Asakuki Is Off",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "fan.diffuser",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 980,
        "y": 960,
        "wires": [
            [
                "fcd251cc.9ec8f"
            ],
            []
        ]
    },
    {
        "id": "246c2d33.fcdda2",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Asakuki Has Water",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "binary_sensor.aromatherapy_water",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 770,
        "y": 960,
        "wires": [
            [
                "3df7c826.175758"
            ],
            []
        ]
    },
    {
        "id": "f6258fa3.221f",
        "type": "inject",
        "z": "823d3fb7.65d29",
        "name": "Bin Reminder Every Wed",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "50 18 * * 3",
        "once": false,
        "onceDelay": 0.1,
        "x": 200,
        "y": 220,
        "wires": [
            [
                "8382d4ea.df9258"
            ]
        ]
    },
    {
        "id": "a30e1a2f.ab8ad8",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "Push Button 2",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "12137384",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 500,
        "y": 2900,
        "wires": [
            []
        ]
    },
    {
        "id": "d3d1a423.e17d28",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Powder Room Basin Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.shelly_2_5_powder_room_basin_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1310,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "5189a580.57236c",
        "type": "server-events",
        "z": "e594dd4a.60761",
        "name": "IOS Action Fired",
        "server": "5a39eab2.9f6814",
        "event_type": "ios.action_fired",
        "x": 500,
        "y": 1620,
        "wires": [
            [
                "2f17f9d2.58f5c6"
            ]
        ]
    },
    {
        "id": "2f17f9d2.58f5c6",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "IOS Action Switch",
        "property": "payload.event.actionName",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Alex Light",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Upstairs Lights",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "All Lights",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Downstairs Lights",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Fix TV",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 770,
        "y": 1620,
        "wires": [
            [
                "adafe54c.17ab38"
            ],
            [
                "2132fc29.10fb94",
                "74007b3e.bf1d44"
            ],
            [
                "2132fc29.10fb94",
                "cc7b53ee.56ba8",
                "74007b3e.bf1d44"
            ],
            [
                "cc7b53ee.56ba8"
            ],
            [
                "f3b56127.ecb5a"
            ]
        ]
    },
    {
        "id": "adafe54c.17ab38",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Alex Room Light Toggle",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "toggle",
        "data": "{\"entity_id\":\"light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1350,
        "y": 1560,
        "wires": [
            []
        ]
    },
    {
        "id": "f3b56127.ecb5a",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Sony TV On",
        "server": "5a39eab2.9f6814",
        "service_domain": "media_player",
        "service": "turn_on",
        "data": "{\"entity_id\":\"media_player.sony_bravia_tv\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1070,
        "y": 1780,
        "wires": [
            [
                "e5f0bc5e.8f944"
            ]
        ]
    },
    {
        "id": "e5f0bc5e.8f944",
        "type": "function",
        "z": "e594dd4a.60761",
        "name": "Delay for 1 seconds",
        "func": "setTimeout(function(){\n    node.status({fill:\"red\", shape:\"ring\", text:\" \"});\n    msg['payload'] = 'finished';\n    node.send(msg);\n}, 1000);\nnode.status({fill:\"blue\", shape:\"ring\", text:' '});",
        "outputs": 1,
        "noerr": 0,
        "x": 1260,
        "y": 1780,
        "wires": [
            [
                "326b8beb.468964"
            ]
        ]
    },
    {
        "id": "22a72e6a.a348e2",
        "type": "template",
        "z": "e594dd4a.60761",
        "name": "Amp On",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgBQAAABJ5MSEhI2EhISEhI2EhISNhI2EjYSEhI2EjYSEhI2EjYSEhISEhISNhISEhISEhISEhISNhI2EhISNhI2EjYSNhI2EgAFAQABJ0kSAAxTDQUAAAAAAAA=",
        "output": "str",
        "x": 1740,
        "y": 1780,
        "wires": [
            [
                "c5dce174.0e037"
            ]
        ]
    },
    {
        "id": "326b8beb.468964",
        "type": "template",
        "z": "e594dd4a.60761",
        "name": "TV On",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgVmAHE4Dg4OKg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4OKg4ODg4ODg4ODg4ODg4ODg4ODg4qDg4ODg4ODg4ODg4ODg4ODg4ODioOKg4qDioOKg4ODg4ODg4qDioOKg4qDioODg4qDgAJlQ0F",
        "output": "str",
        "x": 1430,
        "y": 1780,
        "wires": [
            [
                "4e5ea4bd.d5b3fc"
            ]
        ]
    },
    {
        "id": "4e5ea4bd.d5b3fc",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Broadlink Send",
        "server": "5a39eab2.9f6814",
        "service_domain": "broadlink",
        "service": "send",
        "data": "{\"host\":\"192.168.1.16\",\"packet\":\"{{payload}}\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1580,
        "y": 1780,
        "wires": [
            [
                "22a72e6a.a348e2"
            ]
        ]
    },
    {
        "id": "c5dce174.0e037",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Broadlink Send",
        "server": "5a39eab2.9f6814",
        "service_domain": "broadlink",
        "service": "send",
        "data": "{\"host\":\"192.168.1.16\",\"packet\":\"{{payload}}\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1920,
        "y": 1780,
        "wires": [
            [
                "1cf27b95.d42734"
            ]
        ]
    },
    {
        "id": "1cf27b95.d42734",
        "type": "template",
        "z": "e594dd4a.60761",
        "name": "BD/DVD Input",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgBgAAABJZQSEhI4EhMSEhI4EhISOBI3EhMSExI3EjcSExI4EjcSExISEhMSNxI4EhMSEhITEjcSOBI3EhMSExI3EjcSOBITEgAFGQABJUoTAAxDAAElSxIADEMAASpGEgANBQAAAAAAAAAA",
        "output": "str",
        "x": 2120,
        "y": 1780,
        "wires": [
            [
                "69eb447b.fdd82c"
            ]
        ]
    },
    {
        "id": "69eb447b.fdd82c",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Broadlink Send",
        "server": "5a39eab2.9f6814",
        "service_domain": "broadlink",
        "service": "send",
        "data": "{\"host\":\"192.168.1.16\",\"packet\":\"{{payload}}\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 2300,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "81b0e6ac.176b68",
        "type": "mqtt in",
        "z": "e594dd4a.60761",
        "name": "RTL2MQTT",
        "topic": "rtl_433/events",
        "qos": "2",
        "datatype": "json",
        "broker": "32add66e.5cfcaa",
        "x": 150,
        "y": 200,
        "wires": [
            [
                "3e0c75cc.9b404a"
            ]
        ]
    },
    {
        "id": "b58d20d.40ccde",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 2 A",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1c8d86",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 699,
        "y": 170,
        "wires": [
            [
                "26c4c83b.04b018"
            ]
        ]
    },
    {
        "id": "eb47eba1.d27118",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 2 C",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "4c8d86",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 700,
        "y": 240,
        "wires": [
            [
                "9411307d.55462"
            ]
        ]
    },
    {
        "id": "a11843a6.88452",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 2 D",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "8c8d86",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 700,
        "y": 290,
        "wires": [
            []
        ]
    },
    {
        "id": "b5bedeff.1ff03",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "Push Button 1",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "758586",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 720,
        "y": 40,
        "wires": [
            [
                "43551a9f.1a2844"
            ]
        ]
    },
    {
        "id": "38261683.6962aa",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 1 A",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1e15e4",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 350,
        "wires": [
            [
                "d872b8f.0239348"
            ]
        ]
    },
    {
        "id": "daf39aae.c621c8",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 1 B",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2e15e4",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 390,
        "wires": [
            [
                "47588451.003c9c"
            ]
        ]
    },
    {
        "id": "99498fe5.b1944",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 1 C",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "4e15e4",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 430,
        "wires": [
            [
                "35979dc0.132282"
            ]
        ]
    },
    {
        "id": "cf24d26d.efd03",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 1 D",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "8e15e4",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 470,
        "wires": [
            [
                "46f63076.639ff",
                "cd71ec63.c5f6f"
            ]
        ]
    },
    {
        "id": "ca472daa.b6f5b",
        "type": "mqtt in",
        "z": "e594dd4a.60761",
        "name": "Sub MQTT Turn Off Downstairs",
        "topic": "nodered-custom/lights/turn-off-downstairs",
        "qos": "1",
        "datatype": "auto",
        "broker": "32add66e.5cfcaa",
        "x": 250,
        "y": 2180,
        "wires": [
            [
                "9198f0a3.5ee2c",
                "9c3fa3b4.31473",
                "d2900a52.2d3b58",
                "790ccf3f.8bb74",
                "9210a131.c79cf",
                "8f3410c8.0297f",
                "85886241.b88fa",
                "6974e2dd.6038fc",
                "cc63de0e.0ec94",
                "cb73e99d.71eec8",
                "1fdc477.487ceb9",
                "4109e42.497951c",
                "3ec87a06.4ff786",
                "7693dfac.811d3",
                "822602a.5c051",
                "9cae572f.8da578"
            ]
        ]
    },
    {
        "id": "7f9a2e57.51d76",
        "type": "mqtt out",
        "z": "e594dd4a.60761",
        "name": "Pub MQTT Turn Off Downstairs",
        "topic": "nodered-custom/lights/turn-off-downstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 590,
        "y": 814,
        "wires": []
    },
    {
        "id": "71dd1393.ea52dc",
        "type": "mqtt in",
        "z": "e594dd4a.60761",
        "name": "Sub MQTT Turn Off Upstairs",
        "topic": "nodered-custom/lights/turn-off-upstairs",
        "qos": "1",
        "datatype": "auto",
        "broker": "32add66e.5cfcaa",
        "x": 960,
        "y": 2180,
        "wires": [
            [
                "d371bfec.d293a",
                "a61375ba.3a7088",
                "a5296da0.f2116",
                "1e39803a.e8f9a",
                "67d201ba.1d915",
                "3d518e8a.371632",
                "66aa4e78.ed2db",
                "69ca3e64.f9dca",
                "46a06294.3989dc",
                "e852558e.87eb58",
                "ff9936a2.d714b8",
                "c886bbbe.d31fd8",
                "32edec0c.b20764",
                "3b7bd263.8f4d5e"
            ]
        ]
    },
    {
        "id": "d371bfec.d293a",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Alex Room Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1380,
        "y": 1900,
        "wires": [
            []
        ]
    },
    {
        "id": "a61375ba.3a7088",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Ruby Room Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level_2\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1380,
        "y": 1940,
        "wires": [
            []
        ]
    },
    {
        "id": "a5296da0.f2116",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Guest Room Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_1_guest_room_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1380,
        "y": 1980,
        "wires": [
            []
        ]
    },
    {
        "id": "1e39803a.e8f9a",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Master Room Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.aeon_labs_zw111_nano_dimmer_level_2\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1380,
        "y": 2020,
        "wires": [
            []
        ]
    },
    {
        "id": "67d201ba.1d915",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Rumpus Main Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_2_5_rumpus_main_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1380,
        "y": 2060,
        "wires": [
            []
        ]
    },
    {
        "id": "3d518e8a.371632",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Rumpus Side Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_2_5_rumpus_side_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1380,
        "y": 2100,
        "wires": [
            []
        ]
    },
    {
        "id": "66aa4e78.ed2db",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Rumpus Standing Lamp Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.lifx_rumpus_standing\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1420,
        "y": 2140,
        "wires": [
            []
        ]
    },
    {
        "id": "69ca3e64.f9dca",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Kids Bathroom Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_2_5_kids_bathroom_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1390,
        "y": 2180,
        "wires": [
            []
        ]
    },
    {
        "id": "46a06294.3989dc",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Kids Toilet Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level_3\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1370,
        "y": 2220,
        "wires": [
            []
        ]
    },
    {
        "id": "e852558e.87eb58",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Master Toilet Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_1_master_toilet_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1380,
        "y": 2300,
        "wires": [
            []
        ]
    },
    {
        "id": "ff9936a2.d714b8",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Master Bathroom Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_2_5_master_bathroom_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1400,
        "y": 2340,
        "wires": [
            []
        ]
    },
    {
        "id": "c886bbbe.d31fd8",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Master Dressing Room Lights Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_dimmer_dressing_room\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1420,
        "y": 2380,
        "wires": [
            []
        ]
    },
    {
        "id": "32edec0c.b20764",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Upstairs Lights off routine off",
        "server": "5a39eab2.9f6814",
        "service_domain": "input_boolean",
        "service": "turn_off",
        "data": "{\"entity_id\":\"input_boolean.off_upstairs_lights\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1400,
        "y": 2420,
        "wires": [
            []
        ]
    },
    {
        "id": "7c61dfc.52a8c2",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Alex Night Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.sonoff_belle\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 2010,
        "y": 2180,
        "wires": [
            []
        ]
    },
    {
        "id": "2132fc29.10fb94",
        "type": "mqtt out",
        "z": "e594dd4a.60761",
        "name": "Pub MQTT Turn Off Upstairs",
        "topic": "nodered-custom/lights/turn-off-upstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 1360,
        "y": 1620,
        "wires": []
    },
    {
        "id": "dac60e5f.a75de",
        "type": "mqtt out",
        "z": "e594dd4a.60761",
        "name": "Pub MQTT Turn Off Upstairs",
        "topic": "nodered-custom/lights/turn-off-upstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 600,
        "y": 555,
        "wires": []
    },
    {
        "id": "cc7b53ee.56ba8",
        "type": "mqtt out",
        "z": "e594dd4a.60761",
        "name": "Pub MQTT Turn Off Downstairs",
        "topic": "nodered-custom/lights/turn-off-downstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 1370,
        "y": 1700,
        "wires": []
    },
    {
        "id": "5fe29861.692358",
        "type": "server-state-changed",
        "z": "a76c0410.5bd8c8",
        "name": "Master Bedroom Lights On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "light.aeon_labs_zw111_nano_dimmer_level_2",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 150,
        "y": 80,
        "wires": [
            [
                "630d350b.bd9b6c"
            ],
            [
                "b97f8a5d.356218",
                "3c9f0dce.9f2062"
            ]
        ]
    },
    {
        "id": "b97f8a5d.356218",
        "type": "api-call-service",
        "z": "a76c0410.5bd8c8",
        "name": "Master Dressing Room Lights Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_dimmer_dressing_room\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 480,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "630d350b.bd9b6c",
        "type": "api-call-service",
        "z": "a76c0410.5bd8c8",
        "name": "Master Dressing Room Lights On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.shelly_dimmer_dressing_room\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 480,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "3c9f0dce.9f2062",
        "type": "api-call-service",
        "z": "a76c0410.5bd8c8",
        "name": "Master Bathroom Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_2_5_master_bathroom_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 460,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "87b2ac6d.4c31a",
        "type": "server-state-changed",
        "z": "a76c0410.5bd8c8",
        "name": "Multisensor Movement Detected",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.multisensor_kitchen_motion",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 170,
        "y": 360,
        "wires": [
            [
                "b92a1924.7c6d18"
            ],
            []
        ]
    },
    {
        "id": "b92a1924.7c6d18",
        "type": "function",
        "z": "a76c0410.5bd8c8",
        "name": "Check Time 6,7,8am, 5,6pm",
        "func": "var d = new Date();\nvar hour = d.getHours();\nmsg.showweatherforecast = false;\nif([6, 7, 8, 16, 17].includes(hour)) {\n    msg.hour = hour\n    msg.showweatherforecast = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 460,
        "y": 360,
        "wires": [
            [
                "3cfb1a05.8a6536"
            ]
        ]
    },
    {
        "id": "3cfb1a05.8a6536",
        "type": "switch",
        "z": "a76c0410.5bd8c8",
        "name": "Is Weather Forecast",
        "property": "showweatherforecast",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 760,
        "y": 360,
        "wires": [
            [
                "391813eb.8f75ec"
            ],
            [
                "33f643f5.9e421c"
            ]
        ]
    },
    {
        "id": "f08728ea.bc4b28",
        "type": "inject",
        "z": "a76c0410.5bd8c8",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 900,
        "y": 420,
        "wires": [
            [
                "33f643f5.9e421c"
            ]
        ]
    },
    {
        "id": "391813eb.8f75ec",
        "type": "api-current-state",
        "z": "a76c0410.5bd8c8",
        "name": "Max Temp",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "sensor.bom_forecast_temp_max_0",
        "state_type": "str",
        "state_location": "maxCelcius",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 1130,
        "y": 340,
        "wires": [
            [
                "888beca9.76b15"
            ]
        ]
    },
    {
        "id": "33f643f5.9e421c",
        "type": "function",
        "z": "a76c0410.5bd8c8",
        "name": "Between 9pm and 7am",
        "func": "var d = new Date();\nvar hour = d.getHours();\n\nif(hour >= 21 || hour <= 7) {\n    msg.brightness = 25\n}\nelse {\n    msg.brightness = 100\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1170,
        "y": 420,
        "wires": [
            [
                "a70c9f5c.1e87d"
            ]
        ]
    },
    {
        "id": "a70c9f5c.1e87d",
        "type": "api-current-state",
        "z": "a76c0410.5bd8c8",
        "name": "Is Dark",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "binary_sensor.is_dark",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 1420,
        "y": 420,
        "wires": [
            [
                "eebf587.6757aa8"
            ],
            []
        ]
    },
    {
        "id": "6adc2dfc.e299d4",
        "type": "function",
        "z": "a76c0410.5bd8c8",
        "name": "Extract Weather Data",
        "func": "msg.cycles = 36\nmsg.period = 8\n\nif([6, 7, 8].includes(msg.hour)) {\n    msg.color_name = returnColourNameDayTime(msg.maxCelcius);\n}\nelse if([16, 17].includes(msg.hour)) {\n    msg.color_name = returnColourNameNightTime(msg.minCelcius)\n}\nelse {\n    msg.color_name = returnColourNameDayTime(msg.minCelcius)\n}\n\n\nmsg.mode = msg.rainPercent > 50 ? \"strobe\" : \"breathe\";\n\nfunction returnColourNameDayTime(tempCelcius) {\n    if(tempCelcius >= 25) return \"red\";\n    else if(tempCelcius < 25 && tempCelcius >= 19) return \"green\";\n    else if(tempCelcius < 18) return \"teal\"\n    else return \"gold\";\n}\n\nfunction returnColourNameNightTime(tempCelcius) {\n    if(tempCelcius >= 22) return \"red\";\n    else if(tempCelcius < 22 && tempCelcius >= 17) return \"green\";\n    else if(tempCelcius < 17) return \"teal\"\n    else return \"gold\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1660,
        "y": 340,
        "wires": [
            [
                "298d569c.4bec9a"
            ]
        ]
    },
    {
        "id": "eebf587.6757aa8",
        "type": "api-call-service",
        "z": "a76c0410.5bd8c8",
        "name": "Rumpus Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.lifx_rumpus_standing\",\"brightness_pct\":\"{{brightness}}\",\"kelvin\":\"2500\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1650,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "298d569c.4bec9a",
        "type": "api-call-service",
        "z": "a76c0410.5bd8c8",
        "name": "Rumpus Light Effect",
        "server": "5a39eab2.9f6814",
        "service_domain": "lifx",
        "service": "effect_pulse",
        "data": "{\"entity_id\":\"light.lifx_rumpus_standing\",\"color_name\":\"{{color_name}}\",\"cycles\":\"{{cycles}}\",\"period\":\"{{period}}\",\"mode\":\"{{mode}}\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1900,
        "y": 340,
        "wires": [
            [
                "67d51aa0.3ee464"
            ]
        ]
    },
    {
        "id": "3e0c75cc.9b404a",
        "type": "change",
        "z": "e594dd4a.60761",
        "name": "Clear Data Attribute",
        "rules": [
            {
                "t": "delete",
                "p": "payload.data",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 350,
        "y": 200,
        "wires": [
            [
                "b5bedeff.1ff03",
                "b58d20d.40ccde",
                "eb47eba1.d27118",
                "a11843a6.88452",
                "38261683.6962aa",
                "daf39aae.c621c8",
                "99498fe5.b1944",
                "cf24d26d.efd03",
                "e0b9114e.417bd"
            ]
        ]
    },
    {
        "id": "46f63076.639ff",
        "type": "mqtt out",
        "z": "e594dd4a.60761",
        "name": "Pub MQTT Turn Off Upstairs",
        "topic": "nodered-custom/lights/turn-off-upstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 1030,
        "y": 470,
        "wires": []
    },
    {
        "id": "5591826a.cfad8c",
        "type": "mqtt in",
        "z": "e594dd4a.60761",
        "name": "",
        "topic": "rtl_433/events",
        "qos": "2",
        "datatype": "auto",
        "broker": "32add66e.5cfcaa",
        "x": 130,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "e0b9114e.417bd",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "Push Button 2",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "163493",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 720,
        "y": 80,
        "wires": [
            [
                "e5052fba.a2705"
            ]
        ]
    },
    {
        "id": "67140cff.069504",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Master Dressing Room Lights Toggle",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "toggle",
        "data": "{\"entity_id\":\"light.shelly_dimmer_dressing_room\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1150,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "e5052fba.a2705",
        "type": "debounce",
        "z": "e594dd4a.60761",
        "time": "1000",
        "name": "",
        "x": 900,
        "y": 80,
        "wires": [
            [
                "67140cff.069504"
            ]
        ]
    },
    {
        "id": "a155ef5b.689b2",
        "type": "mqtt in",
        "z": "3434d199.8ed28e",
        "name": "Zigbee2MQTT",
        "topic": "zigbee2mqtt/#",
        "qos": "2",
        "datatype": "utf8",
        "broker": "32add66e.5cfcaa",
        "x": 170,
        "y": 240,
        "wires": [
            [
                "6afea8f1.71fd88"
            ]
        ]
    },
    {
        "id": "6f0a76e0.adb988",
        "type": "switch",
        "z": "3434d199.8ed28e",
        "name": "Switch",
        "property": "payload.mqtt_action",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "off",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "brightness_up",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "brightness_down",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "brightness_stop",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "rotate_right",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "rotate_left",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "play_pause",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "skip_forward",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "skip_backward",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 10,
        "x": 590,
        "y": 240,
        "wires": [
            [
                "77671717.68a198"
            ],
            [
                "272b6c02.ffb5e4"
            ],
            [
                "c3204859.6dc628"
            ],
            [
                "c3204859.6dc628"
            ],
            [
                "eea65ef.9079aa"
            ],
            [
                "852dd0e6.cdbfa"
            ],
            [
                "ffa23a63.7b7048"
            ],
            [
                "4247f0d8.ed32e"
            ],
            [
                "bdb1a8ec.783d68"
            ],
            [
                "34ce4184.0f3dae"
            ]
        ]
    },
    {
        "id": "77671717.68a198",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"Ettienne\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 880,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "272b6c02.ffb5e4",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"Ettienne\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 880,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "3b1e6eaa.66a872",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Study Lamp Adjust Brightness",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"Ettienne\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1190,
        "y": 220,
        "wires": [
            [
                "79ec80a7.590fd"
            ]
        ]
    },
    {
        "id": "c3204859.6dc628",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Setup Ramping",
        "func": "switch(msg.payload.mqtt_action) {\n    case \"brightness_up\":\n        msg.payload.data.brightness_step = 25;\n        break;\n    case \"brightness_down\":\n        msg.payload.data.brightness_step = -25;\n        break;\n}\nmsg.payload.data.transition = 0.5;\nflow.set(\"keepRamping\", true);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 900,
        "y": 220,
        "wires": [
            [
                "3b1e6eaa.66a872"
            ]
        ]
    },
    {
        "id": "79ec80a7.590fd",
        "type": "switch",
        "z": "3434d199.8ed28e",
        "name": "Check Keep Ramping",
        "property": "keepRamping",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1480,
        "y": 220,
        "wires": [
            [
                "e8f21668.b98378"
            ],
            []
        ]
    },
    {
        "id": "e8f21668.b98378",
        "type": "delay",
        "z": "3434d199.8ed28e",
        "name": "",
        "pauseType": "delay",
        "timeout": "500",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1690,
        "y": 220,
        "wires": [
            [
                "3b1e6eaa.66a872"
            ]
        ]
    },
    {
        "id": "6afea8f1.71fd88",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Switch Topic to Entity ID",
        "func": "var mqtt_action = msg.payload;\nmsg.payload = { data: { entity_id: null }};\nmsg.payload.mqtt_action = mqtt_action;\nswitch(msg.topic) {\n    case \"zigbee2mqtt/Tradfri Button 1/click\":\n        msg.payload.data.entity_id = \"light.shelly_dimmer_ruby_lamp\";\n        \n        break;\n    case \"zigbee2mqtt/Tradfri Button 2/click\":\n        msg.payload.data.entity_id = \"light.tradfri_bulb_1\";\n        break;\n    case \"zigbee2mqtt/Tradfri Button 3/click\":\n        msg.payload.data.entity_id = \"light.lifx_bulb_1\";\n        break;\n    case \"zigbee2mqtt/Tradfri Volume 1/action\":\n        msg.custom = {};\n        msg.custom.entity_id = \"media_player.kitchen_speaker\";\n        break;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 390,
        "y": 240,
        "wires": [
            [
                "6f0a76e0.adb988"
            ]
        ]
    },
    {
        "id": "eea65ef.9079aa",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Stop Ramping",
        "func": "flow.set(\"keepRamping\", false);",
        "outputs": 1,
        "noerr": 0,
        "x": 900,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "158a1e9b.07eac1",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Dining Motion PIR",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.tradfri_pir_1",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 150,
        "y": 1686,
        "wires": [
            [
                "8628cbaa.6e0518"
            ],
            []
        ]
    },
    {
        "id": "8628cbaa.6e0518",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Is Dark",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "binary_sensor.is_dark",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 400,
        "y": 1686,
        "wires": [
            [
                "60c3600d.1f3f"
            ],
            []
        ]
    },
    {
        "id": "60c3600d.1f3f",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Dining Lights On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level_4\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 590,
        "y": 1686,
        "wires": [
            []
        ]
    },
    {
        "id": "2080582f.f25708",
        "type": "trigger",
        "z": "d1ff6abb.b25cf8",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "10",
        "extend": false,
        "units": "min",
        "reset": "on",
        "bytopic": "all",
        "name": "10 Minutes",
        "x": 730,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "c12cc665.101d48",
        "type": "inject",
        "z": "e594dd4a.60761",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 140,
        "y": 900,
        "wires": [
            [
                "801bdce2.f1044"
            ]
        ]
    },
    {
        "id": "801bdce2.f1044",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Study Lamp Toggle",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "toggle",
        "data": "{\"entity_id\":\"light.tradfri_bulb_1\",\"transition\":\"5\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 390,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "43551a9f.1a2844",
        "type": "debounce",
        "z": "e594dd4a.60761",
        "time": "1000",
        "name": "",
        "x": 900,
        "y": 40,
        "wires": [
            [
                "d2023620.5170c8"
            ]
        ]
    },
    {
        "id": "b3001fe9.49254",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Stop Music Downstairs",
        "server": "5a39eab2.9f6814",
        "service_domain": "media_player",
        "service": "media_stop",
        "data": "{\"entity_id\":\"media_player.downstairs\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1460,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "220a198d.f6db36",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Start Music Downstairs",
        "server": "5a39eab2.9f6814",
        "service_domain": "spotcast",
        "service": "start",
        "data": "{\"entity_id\":\"media_player.downstairs\",\"uri\":\"{{randomPlaylist.uri}}\",\"random_song\":true,\"force_playback\":true}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1717,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "d2023620.5170c8",
        "type": "api-current-state",
        "z": "e594dd4a.60761",
        "name": "Downstairs Is Playing",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "playing",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "media_player.downstairs",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 1100,
        "y": 40,
        "wires": [
            [
                "b3001fe9.49254"
            ],
            [
                "17315006.19269"
            ]
        ]
    },
    {
        "id": "17315006.19269",
        "type": "function",
        "z": "e594dd4a.60761",
        "name": "Choose Random Playlist",
        "func": "let playlistsArray = [\n    {\n        uri : \"spotify:playlist:37i9dQZF1E4EFyuVOygvQ7\", \n        desc : \"Air Radio\",\n    },\n    {\n        uri : \"spotify:playlist:37i9dQZF1E39OdKMfKM663\", \n        desc : \"Tame Impala, Two Door Cinema, Gang of Youths\",\n    },\n    {\n        uri : \"spotify:playlist:37i9dQZF1E35sNS8MhSVoM\", \n        desc : \"Nightmares on Wax, Zero 7 etc\",\n    },\n    \n]\n\nvar randomPlaylist = playlistsArray[Math.floor(Math.random()*playlistsArray.length)];\nmsg.randomPlaylist = randomPlaylist;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1470,
        "y": 60,
        "wires": [
            [
                "220a198d.f6db36"
            ]
        ]
    },
    {
        "id": "ee43f1f5.173e6",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "TTS Announce",
        "server": "5a39eab2.9f6814",
        "service_domain": "tts",
        "service": "google_translate_say",
        "data": "{\"entity_id\":\"media_player.kitchen_speaker\",\"message\":\"{{randomPlaylist.desc}}\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 140,
        "y": 1487,
        "wires": [
            []
        ]
    },
    {
        "id": "9bc6106a.d6826",
        "type": "stoptimer3",
        "z": "d1ff6abb.b25cf8",
        "duration": "3",
        "durationType": "num",
        "units": "Minute",
        "payloadtype": "num",
        "payloadval": "0",
        "name": "3 Minute Stop Timer",
        "x": 580,
        "y": 140,
        "wires": [
            [
                "f7046b1d.dc9608"
            ],
            []
        ]
    },
    {
        "id": "74e177f.a451188",
        "type": "server-state-changed",
        "z": "191e949e.9f212b",
        "name": "Coffee Machine Goes On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "switch.tp_link_1",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 270,
        "y": 140,
        "wires": [
            [
                "9dccf6.934c4308"
            ],
            [
                "7d1a13b7.25754c"
            ]
        ]
    },
    {
        "id": "7d1a13b7.25754c",
        "type": "change",
        "z": "191e949e.9f212b",
        "name": "Reset",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 180,
        "wires": [
            [
                "9dccf6.934c4308"
            ]
        ]
    },
    {
        "id": "9dccf6.934c4308",
        "type": "delay",
        "z": "191e949e.9f212b",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "hours",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 700,
        "y": 140,
        "wires": [
            [
                "30460a9c.539026"
            ]
        ]
    },
    {
        "id": "30460a9c.539026",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Coffee Machine Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{\"entity_id\":\"switch.tp_link_1\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 970,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "6a9142b5.2aa82c",
        "type": "poll-state",
        "z": "191e949e.9f212b",
        "name": "No movement for x seconds",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "updateinterval": "360",
        "updateIntervalUnits": "seconds",
        "outputinitially": false,
        "outputonchanged": false,
        "entity_id": "binary_sensor.multisensor_kitchen_motion",
        "state_type": "str",
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "x": 280,
        "y": 40,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "ce936d28.b97d7",
        "type": "api-current-state",
        "z": "191e949e.9f212b",
        "name": "Sun Below Horizon",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "below_horizon",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "sun.sun",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 570,
        "y": 40,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "17d42f68.94d161",
        "type": "server-state-changed",
        "z": "191e949e.9f212b",
        "name": "Laundry Light On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "light.shelly_1_laundry",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 240,
        "y": 320,
        "wires": [
            [
                "35fb861e.3d82ea"
            ],
            [
                "35fb861e.3d82ea"
            ]
        ]
    },
    {
        "id": "2c960bec.75b3f4",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Laundry Lights Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_1_laundry\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 970,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "35fb861e.3d82ea",
        "type": "trigger",
        "z": "191e949e.9f212b",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "15",
        "extend": false,
        "units": "min",
        "reset": "off",
        "bytopic": "all",
        "name": "15 Minutes",
        "x": 710,
        "y": 320,
        "wires": [
            [
                "2c960bec.75b3f4"
            ]
        ]
    },
    {
        "id": "6f3378ed.4ebfc8",
        "type": "server-state-changed",
        "z": "191e949e.9f212b",
        "name": "Pantry Light On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "light.lifx_pantry",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 240,
        "y": 260,
        "wires": [
            [
                "a22296bc.9b7158"
            ],
            [
                "a22296bc.9b7158"
            ]
        ]
    },
    {
        "id": "930f5993.fc04d8",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Pantry Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.lifx_pantry\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 960,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "a22296bc.9b7158",
        "type": "trigger",
        "z": "191e949e.9f212b",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "30",
        "extend": false,
        "units": "min",
        "reset": "off",
        "bytopic": "all",
        "name": "30 Minutes",
        "x": 710,
        "y": 260,
        "wires": [
            [
                "930f5993.fc04d8"
            ]
        ]
    },
    {
        "id": "5a3862d6.d1321c",
        "type": "server-state-changed",
        "z": "191e949e.9f212b",
        "name": "Stairs Landing Motion Detected Sonoff PIR",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.tradfri_pir_2",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 320,
        "y": 640,
        "wires": [
            [
                "b5a89aa9.7d4c68"
            ],
            []
        ]
    },
    {
        "id": "8901a4e2.ad5778",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Stairs Landing Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_2_5_powder_room_basin_light,light.shelly_2_5_stairs_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 990,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "e3046060.989b7",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Front Door Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.dimmer_foyer_light_level\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 970,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "235f0d1.5dccdf2",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Asakuki Diffuser Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "fan",
        "service": "turn_off",
        "data": "{\"entity_id\":\"fan.diffuser\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 970,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "b5a89aa9.7d4c68",
        "type": "stoptimer3",
        "z": "191e949e.9f212b",
        "duration": "3",
        "durationType": "num",
        "units": "Minute",
        "payloadtype": "num",
        "payloadval": "0",
        "name": "3 Minute Stop Timer",
        "x": 680,
        "y": 640,
        "wires": [
            [
                "8901a4e2.ad5778",
                "e3046060.989b7",
                "235f0d1.5dccdf2",
                "7d7e1667.19fd88"
            ],
            []
        ]
    },
    {
        "id": "3ac262b3.6ef06e",
        "type": "server-state-changed",
        "z": "191e949e.9f212b",
        "name": "Dining Light On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level_4",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 320,
        "y": 1120,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "ffebc35f.8713f",
        "type": "stoptimer3",
        "z": "191e949e.9f212b",
        "duration": "15",
        "durationType": "num",
        "units": "Minute",
        "payloadtype": "num",
        "payloadval": "0",
        "name": "15 Minute Stop Timer",
        "x": 680,
        "y": 844,
        "wires": [
            [
                "cd654c10.cbb95"
            ],
            []
        ]
    },
    {
        "id": "cd654c10.cbb95",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Dining Lights",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level_4\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 950,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "c990c1f6.731ed",
        "type": "server-state-changed",
        "z": "191e949e.9f212b",
        "name": "Downstairs Toilet Light On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "switch.aeon_labs_dsc18103_micro_smart_switch_2nd_edition_switch",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 270,
        "y": 400,
        "wires": [
            [
                "8256f215.2d5"
            ],
            [
                "8256f215.2d5"
            ]
        ]
    },
    {
        "id": "4191a48b.86c49c",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Turn off Toilet Lights",
        "server": "5a39eab2.9f6814",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{\"entity_id\":\"switch.aeon_labs_dsc18103_micro_smart_switch_2nd_edition_switch\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 980,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "8256f215.2d5",
        "type": "trigger",
        "z": "191e949e.9f212b",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "5",
        "extend": false,
        "units": "min",
        "reset": "off",
        "bytopic": "all",
        "name": "5 Minutes",
        "x": 700,
        "y": 400,
        "wires": [
            [
                "4191a48b.86c49c"
            ]
        ]
    },
    {
        "id": "cf35861a.162cf8",
        "type": "server-state-changed",
        "z": "191e949e.9f212b",
        "name": "Garage Flood Light On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "light.garage_flood_light",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 260,
        "y": 480,
        "wires": [
            [
                "90a7a3bb.f93ac"
            ],
            [
                "90a7a3bb.f93ac"
            ]
        ]
    },
    {
        "id": "90a7a3bb.f93ac",
        "type": "trigger",
        "z": "191e949e.9f212b",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "1",
        "extend": false,
        "units": "hr",
        "reset": "off",
        "bytopic": "all",
        "name": "1 Hour",
        "x": 690,
        "y": 480,
        "wires": [
            [
                "9396ad98.75b8f"
            ]
        ]
    },
    {
        "id": "9396ad98.75b8f",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Turn off Garage Flood Light",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.garage_flood_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1000,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "98eeeb38.26da68",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Turn off Garage Lifx Light",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.lifx_garage\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 990,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "28cb1048.3ddbd",
        "type": "trigger",
        "z": "191e949e.9f212b",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "1",
        "extend": false,
        "units": "hr",
        "reset": "off",
        "bytopic": "all",
        "name": "1 Hour",
        "x": 690,
        "y": 540,
        "wires": [
            [
                "98eeeb38.26da68"
            ]
        ]
    },
    {
        "id": "ea46acb4.dbd9",
        "type": "server-state-changed",
        "z": "191e949e.9f212b",
        "name": "Garage Lifx Light On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "light.lifx_garage",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 250,
        "y": 540,
        "wires": [
            [
                "28cb1048.3ddbd"
            ],
            [
                "28cb1048.3ddbd"
            ]
        ]
    },
    {
        "id": "c6466b14.4851e8",
        "type": "server-state-changed",
        "z": "191e949e.9f212b",
        "name": "Dining Motion PIR",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.tradfri_pir_1",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 250,
        "y": 840,
        "wires": [
            [
                "ffebc35f.8713f"
            ],
            []
        ]
    },
    {
        "id": "1b5a8da8.0c0562",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Lounge TV Time Routine On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "input_boolean.lounge_tv_time",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 180,
        "y": 1300,
        "wires": [
            [
                "ee38a39d.c6126"
            ],
            []
        ]
    },
    {
        "id": "a969f804.c79ad8",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Lounge TV Time Routine Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "input_boolean",
        "service": "turn_off",
        "data": "{\"entity_id\":\"input_boolean.lounge_tv_time\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1300,
        "y": 1300,
        "wires": [
            [
                "29b41ec2.233962"
            ]
        ]
    },
    {
        "id": "ee38a39d.c6126",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Set Routine Running Global",
        "func": "flow.set(\"tv_time_routine_running\", true);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 490,
        "y": 1300,
        "wires": [
            [
                "da196831.9bc778"
            ]
        ]
    },
    {
        "id": "82bdf713.501298",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Lounge Dimmer Nano On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "light.aeon_labs_zw111_nano_dimmer_level",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 170,
        "y": 1380,
        "wires": [
            [
                "5529ce2.f07b03"
            ],
            [
                "5529ce2.f07b03"
            ]
        ]
    },
    {
        "id": "d012898c.f0ca08",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Toggle Service",
        "func": "msg.service = msg.payload == \"on\" ? \"turn_on\" : \"turn_off\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 760,
        "y": 1380,
        "wires": [
            [
                "58c85c38.d30fe4"
            ]
        ]
    },
    {
        "id": "58c85c38.d30fe4",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Sony TV Toggle",
        "server": "5a39eab2.9f6814",
        "service_domain": "media_player",
        "service": "{{service}}",
        "data": "{\"entity_id\":\"media_player.sony_bravia_tv\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1020,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "5529ce2.f07b03",
        "type": "switch",
        "z": "823d3fb7.65d29",
        "name": "Check TV Time Routine Global",
        "property": "tv_time_routine_running",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 490,
        "y": 1380,
        "wires": [
            [],
            [
                "d012898c.f0ca08"
            ]
        ]
    },
    {
        "id": "da196831.9bc778",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Loung Nano Dimmer Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.aeon_labs_zw111_nano_dimmer_level\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 790,
        "y": 1300,
        "wires": [
            [
                "c983049.bac5bf8"
            ]
        ]
    },
    {
        "id": "c983049.bac5bf8",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Alex Kitchen Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.shelly_1_alex_kitchen_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1040,
        "y": 1300,
        "wires": [
            [
                "a969f804.c79ad8"
            ]
        ]
    },
    {
        "id": "4e8257c5.49a228",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Set Routine Running Global",
        "func": "flow.set(\"tv_time_routine_running\", false);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1760,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "29b41ec2.233962",
        "type": "delay",
        "z": "823d3fb7.65d29",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1540,
        "y": 1300,
        "wires": [
            [
                "4e8257c5.49a228"
            ]
        ]
    },
    {
        "id": "6d97ee91.b1d6a",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Sony TV On",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "media_player.sony_bravia_tv",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 130,
        "y": 1460,
        "wires": [
            [
                "a6a21e9a.085ba"
            ],
            [
                "a6a21e9a.085ba"
            ]
        ]
    },
    {
        "id": "a6a21e9a.085ba",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Toggle Service",
        "func": "msg.service = msg.payload == \"on\" ? \"turn_on\" : \"turn_off\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 440,
        "y": 1460,
        "wires": [
            [
                "574b1f51.b8691"
            ]
        ]
    },
    {
        "id": "574b1f51.b8691",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Standing Lamp Toggle",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "{{service}}",
        "data": "{\"entity_id\":\"light.dimmer_smart_energy_illum_light_level\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 780,
        "y": 1460,
        "wires": [
            []
        ]
    },
    {
        "id": "525089c2.aa08f8",
        "type": "mqtt in",
        "z": "e594dd4a.60761",
        "name": "Sub MQTT Turn Off Upstairs ALL",
        "topic": "nodered-custom/lights/turn-off-upstairs-all",
        "qos": "1",
        "datatype": "auto",
        "broker": "32add66e.5cfcaa",
        "x": 1770,
        "y": 2180,
        "wires": [
            [
                "7c61dfc.52a8c2"
            ]
        ]
    },
    {
        "id": "cd71ec63.c5f6f",
        "type": "mqtt out",
        "z": "e594dd4a.60761",
        "name": "Pub MQTT Turn Off Upstairs ALL",
        "topic": "nodered-custom/lights/turn-off-upstairs-all",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 1049,
        "y": 520,
        "wires": []
    },
    {
        "id": "ab093810.0a8fd8",
        "type": "mqtt out",
        "z": "823d3fb7.65d29",
        "name": "Pub MQTT Turn Off Downstairs",
        "topic": "nodered-custom/lights/turn-off-downstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 990,
        "y": 500,
        "wires": []
    },
    {
        "id": "27aa3de3.f57a62",
        "type": "mqtt out",
        "z": "823d3fb7.65d29",
        "name": "Pub MQTT Turn Off Upstairs",
        "topic": "nodered-custom/lights/turn-off-upstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 980,
        "y": 540,
        "wires": []
    },
    {
        "id": "795777ec.6f1138",
        "type": "mqtt out",
        "z": "823d3fb7.65d29",
        "name": "Pub MQTT Turn Off Downstairs",
        "topic": "nodered-custom/lights/turn-off-downstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 990,
        "y": 800,
        "wires": []
    },
    {
        "id": "924ef799.d4d6e8",
        "type": "mqtt out",
        "z": "e594dd4a.60761",
        "name": "Pub MQTT Turn Off Upstairs ALL",
        "topic": "nodered-custom/lights/turn-off-upstairs-all",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 620,
        "y": 600,
        "wires": []
    },
    {
        "id": "74007b3e.bf1d44",
        "type": "mqtt out",
        "z": "e594dd4a.60761",
        "name": "Pub MQTT Turn Off Upstairs ALL",
        "topic": "nodered-custom/lights/turn-off-upstairs-all",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 1380,
        "y": 1660,
        "wires": []
    },
    {
        "id": "51d5d337.a9755c",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Volume Up",
        "server": "5a39eab2.9f6814",
        "service_domain": "media_player",
        "service": "volume_up",
        "data": "{\"entity_id\":\"Ettienne\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 370,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "14357121.10182f",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Volume Down",
        "server": "5a39eab2.9f6814",
        "service_domain": "media_player",
        "service": "volume_down",
        "data": "",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 380,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "2184b5c7.89f18a",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Stop Music Downstairs",
        "server": "5a39eab2.9f6814",
        "service_domain": "media_player",
        "service": "media_stop",
        "data": "{\"entity_id\":\"media_player.kitchen_speaker\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1220,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "7bc1d1ad.a5ea1",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Start Music Downstairs",
        "server": "5a39eab2.9f6814",
        "service_domain": "spotcast",
        "service": "start",
        "data": "{\"entity_id\":\"media_player.kitchen_speaker\",\"uri\":\"{{randomPlaylist.uri}}\",\"random_song\":true,\"force_playback\":true}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1460,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "78fc8845.fa8598",
        "type": "api-current-state",
        "z": "3434d199.8ed28e",
        "name": "Downstairs Is Playing",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "playing",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "media_player.kitchen_speaker",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 980,
        "y": 700,
        "wires": [
            [
                "2184b5c7.89f18a"
            ],
            [
                "d84ac7b7.16f4e8"
            ]
        ]
    },
    {
        "id": "d84ac7b7.16f4e8",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Choose Random Playlist",
        "func": "let playlistsArray = [\n    {\n        uri : \"spotify:playlist:37i9dQZF1E4EFyuVOygvQ7\", \n        desc : \"Air Radio\",\n    },\n    {\n        uri : \"spotify:playlist:37i9dQZF1E39OdKMfKM663\", \n        desc : \"Tame Impala, Two Door Cinema, Gang of Youths\",\n    },\n    {\n        uri : \"spotify:playlist:37i9dQZF1E35sNS8MhSVoM\", \n        desc : \"Nightmares on Wax, Zero 7 etc\",\n    },\n    \n]\n\nvar randomPlaylist = playlistsArray[Math.floor(Math.random()*playlistsArray.length)];\nmsg.randomPlaylist = randomPlaylist;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1230,
        "y": 720,
        "wires": [
            [
                "7bc1d1ad.a5ea1"
            ]
        ]
    },
    {
        "id": "9cae572f.8da578",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Study Lamp Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.tradfri_bulb_1\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 560,
        "y": 2480,
        "wires": [
            []
        ]
    },
    {
        "id": "461d3fbe.e55c4",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Skip Forward",
        "server": "5a39eab2.9f6814",
        "service_domain": "media_player",
        "service": "media_next_track",
        "data": "{\"entity_id\":\"media_player.kitchen_speaker\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 370,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "ec795c72.5cd9",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Skip Backward",
        "server": "5a39eab2.9f6814",
        "service_domain": "media_player",
        "service": "media_previous_track",
        "data": "{\"entity_id\":\"media_player.kitchen_speaker\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 380,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "26670465.49450c",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Play/Pause",
        "server": "5a39eab2.9f6814",
        "service_domain": "media_player",
        "service": "media_play_pause",
        "data": "{\"entity_id\":\"media_player.kitchen_speaker\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 370,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "852dd0e6.cdbfa",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Volume Up",
        "func": "msg.custom.service = \"volume_up\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 890,
        "y": 300,
        "wires": [
            [
                "c0d920bf.8be99"
            ]
        ]
    },
    {
        "id": "ffa23a63.7b7048",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Volume Down",
        "func": "msg.custom.service = \"volume_down\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 900,
        "y": 340,
        "wires": [
            [
                "c0d920bf.8be99"
            ]
        ]
    },
    {
        "id": "4247f0d8.ed32e",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Play/Pause",
        "func": "msg.custom.service = \"media_play_pause\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 890,
        "y": 400,
        "wires": [
            [
                "c0d920bf.8be99"
            ]
        ]
    },
    {
        "id": "bdb1a8ec.783d68",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Skip Forward",
        "func": "msg.custom.service = \"media_next_track\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 890,
        "y": 440,
        "wires": [
            [
                "c0d920bf.8be99"
            ]
        ]
    },
    {
        "id": "34ce4184.0f3dae",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Skip Backward",
        "func": "msg.custom.service = \"media_previous_track\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 900,
        "y": 480,
        "wires": [
            [
                "c0d920bf.8be99"
            ]
        ]
    },
    {
        "id": "9eee98d.373ea68",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Call Media Player Service",
        "server": "5a39eab2.9f6814",
        "service_domain": "media_player",
        "service": "{{custom.service}}",
        "data": "{\"entity_id\":\"{{custom.entity_id}}\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1690,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "c0d920bf.8be99",
        "type": "api-current-state",
        "z": "3434d199.8ed28e",
        "name": "Downstairs Playing",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "playing",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "media_player.downstairs",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 1170,
        "y": 360,
        "wires": [
            [
                "6eed1c68.95c104"
            ],
            [
                "9eee98d.373ea68"
            ]
        ]
    },
    {
        "id": "6eed1c68.95c104",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Switch Topic to Entity ID",
        "func": "msg.custom.entity_id = \"media_player.downstairs\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1430,
        "y": 320,
        "wires": [
            [
                "9eee98d.373ea68",
                "833b5a5a.165848"
            ]
        ]
    },
    {
        "id": "e461c325.4ebbf",
        "type": "comment",
        "z": "3434d199.8ed28e",
        "name": "Target Override",
        "info": "If downstairs is playing override the target device of kitchen speaker",
        "x": 1400,
        "y": 280,
        "wires": []
    },
    {
        "id": "833b5a5a.165848",
        "type": "debug",
        "z": "3434d199.8ed28e",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1360,
        "y": 440,
        "wires": []
    },
    {
        "id": "3b7bd263.8f4d5e",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Alex Lamp Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.lifx_bulb_1\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 1360,
        "y": 2260,
        "wires": [
            []
        ]
    },
    {
        "id": "28e911af.0fbade",
        "type": "inject",
        "z": "a76c0410.5bd8c8",
        "name": "7AM Turn off Nightlight",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "00 07 * * *",
        "once": false,
        "onceDelay": 0.1,
        "x": 170,
        "y": 480,
        "wires": [
            [
                "9a80de7e.89217"
            ]
        ]
    },
    {
        "id": "9a80de7e.89217",
        "type": "api-call-service",
        "z": "a76c0410.5bd8c8",
        "name": "Alex Night Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.sonoff_belle\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 850,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "110c7d47.baca83",
        "type": "inject",
        "z": "a76c0410.5bd8c8",
        "name": "7:20PM Turn on Nightlight",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "20 19 * * *",
        "once": false,
        "onceDelay": 0.1,
        "x": 180,
        "y": 540,
        "wires": [
            [
                "2ebc6d4b.325af2"
            ]
        ]
    },
    {
        "id": "2ebc6d4b.325af2",
        "type": "api-call-service",
        "z": "a76c0410.5bd8c8",
        "name": "Alex Night Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.sonoff_belle\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 850,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "e1882e38.240ee",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Front Door Open",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.st_contact_sensor_1",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 140,
        "y": 1780,
        "wires": [
            [
                "e94e560a.804908"
            ],
            []
        ]
    },
    {
        "id": "e94e560a.804908",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Is Dark",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "binary_sensor.is_dark",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 340,
        "y": 1780,
        "wires": [
            [
                "c314f95a.10d298"
            ],
            []
        ]
    },
    {
        "id": "c314f95a.10d298",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Front Door Light On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.front_door_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 580,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "eb35eb0a.b86e18",
        "type": "server-state-changed",
        "z": "191e949e.9f212b",
        "name": "Front Door Close",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "entityidfilter": "binary_sensor.st_contact_sensor_1",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "x": 260,
        "y": 980,
        "wires": [
            [
                "b37fb8d9.e28718"
            ],
            [
                "b37fb8d9.e28718"
            ]
        ]
    },
    {
        "id": "2ab945a4.45e03a",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Front Door Light Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.front_door_light\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 970,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "b37fb8d9.e28718",
        "type": "trigger",
        "z": "191e949e.9f212b",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "3",
        "extend": true,
        "units": "min",
        "reset": "on",
        "bytopic": "all",
        "name": "3 Minutes",
        "x": 620,
        "y": 980,
        "wires": [
            [
                "2ab945a4.45e03a"
            ]
        ]
    },
    {
        "id": "169d704e.b0793",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Wled On",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_on",
        "data": "{\"entity_id\":\"light.wled\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 740,
        "y": 1136,
        "wires": [
            [
                "62e04525.92d89c"
            ]
        ]
    },
    {
        "id": "7d7e1667.19fd88",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Wled Off",
        "server": "5a39eab2.9f6814",
        "service_domain": "light",
        "service": "turn_off",
        "data": "{\"entity_id\":\"light.wled\"}",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 940,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "888beca9.76b15",
        "type": "api-current-state",
        "z": "a76c0410.5bd8c8",
        "name": "Min Temp",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "sensor.bom_forecast_temp_min_0",
        "state_type": "str",
        "state_location": "minCelcius",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 1300,
        "y": 340,
        "wires": [
            [
                "f004f152.4c7d6"
            ]
        ]
    },
    {
        "id": "f004f152.4c7d6",
        "type": "api-current-state",
        "z": "a76c0410.5bd8c8",
        "name": "Rain %",
        "server": "5a39eab2.9f6814",
        "version": 1,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "sensor.bom_forecast_rain_chance_0",
        "state_type": "str",
        "state_location": "rainPercent",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 1460,
        "y": 340,
        "wires": [
            [
                "6adc2dfc.e299d4"
            ]
        ]
    },
    {
        "id": "67d51aa0.3ee464",
        "type": "debug",
        "z": "a76c0410.5bd8c8",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 2090,
        "y": 340,
        "wires": []
    },
    {
        "id": "4d01c8ab.f938c8",
        "type": "inject",
        "z": "a76c0410.5bd8c8",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 920,
        "y": 260,
        "wires": [
            [
                "391813eb.8f75ec"
            ]
        ]
    },
    {
        "id": "8209399b.724c48",
        "type": "wled2",
        "z": "27f4a783.3a8dc8",
        "address": "192.168.20.53",
        "brightness": "14",
        "delay": 0,
        "color1": "#ffffff",
        "color2": "#ffffff",
        "color3": "#ffffff",
        "effect": "44",
        "effectIntensity": 128,
        "effectSpeed": 128,
        "name": "Xmas Tree On",
        "palette": "1",
        "preset": 0,
        "state": "on",
        "x": 1140,
        "y": 1180,
        "wires": [
            []
        ]
    },
    {
        "id": "62e04525.92d89c",
        "type": "function",
        "z": "27f4a783.3a8dc8",
        "name": "Random Effect",
        "func": "let randomNumber = Math.floor(Math.random() * 111);\nmsg.payload = {\n    \"effect\": randomNumber\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 940,
        "y": 1180,
        "wires": [
            [
                "8209399b.724c48"
            ]
        ]
    }
]